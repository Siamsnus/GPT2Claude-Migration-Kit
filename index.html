<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GPT to Claude Migration Kit - Export everything from ChatGPT</title>
<meta name="description" content="Export your ChatGPT memories, conversations, and instructions. No install needed.">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #08080a; --surface: #111114; --surface2: #18181c; --border: #252530;
    --text: #e4e4ea; --text-dim: #7a7a88; --accent: #d4a574;
    --accent-glow: rgba(212, 165, 116, 0.15); --gpt: #9898d4;
    --green: #7eb8a0; --red: #d47474;
    --mono: 'Space Mono', monospace; --sans: 'DM Sans', system-ui, sans-serif;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { background: var(--bg); color: var(--text); font-family: var(--sans); line-height: 1.7; min-height: 100vh; overflow-x: hidden; }
  body::before { content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E"); pointer-events: none; z-index: 1; }
  .container { max-width: 720px; margin: 0 auto; padding: 0 2rem; position: relative; z-index: 2; }
  .hero { padding: 6rem 0 4rem; text-align: center; }
  .hero-badge { display: inline-block; padding: 4px 14px; border: 1px solid var(--border); border-radius: 100px; font-family: var(--mono); font-size: 0.72rem; color: var(--text-dim); margin-bottom: 2rem; letter-spacing: 0.05em; }
  .hero h1 { font-size: clamp(2.2rem, 5vw, 3.2rem); font-weight: 700; letter-spacing: -0.03em; line-height: 1.15; margin-bottom: 1.5rem; }
  .hero h1 .gpt { color: var(--gpt); } .hero h1 .arrow { color: var(--text-dim); opacity: 0.4; } .hero h1 .claude { color: var(--accent); }
  .hero p { font-size: 1.1rem; color: var(--text-dim); max-width: 520px; margin: 0 auto 3rem; }

  .install-section { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 3rem 2.5rem; text-align: center; position: relative; overflow: hidden; }
  .install-section::before { content: ""; position: absolute; top: -1px; left: -1px; right: -1px; height: 3px; background: linear-gradient(90deg, var(--gpt), var(--accent)); border-radius: 20px 20px 0 0; }
  .install-section h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; }
  .install-section .subtitle { color: var(--text-dim); font-size: 0.92rem; margin-bottom: 2rem; }

  /* Tab system */
  .tab-bar { display: flex; justify-content: center; gap: 0; margin-bottom: 2rem; background: var(--bg); border-radius: 10px; padding: 4px; border: 1px solid var(--border); }
  .tab-btn { padding: 8px 20px; border: none; background: transparent; color: var(--text-dim); font-family: var(--sans); font-size: 0.85rem; font-weight: 600; cursor: pointer; border-radius: 8px; transition: all 0.2s; }
  .tab-btn:hover { color: var(--text); }
  .tab-btn.active { background: var(--accent); color: var(--bg); }
  .tab-content { display: none; text-align: left; }
  .tab-content.active { display: block; }

  .bookmarklet-link { display: inline-flex; align-items: center; gap: 10px; padding: 16px 32px; background: linear-gradient(135deg, #d4a574, #c49060); color: #0a0a0b; font-family: var(--sans); font-size: 1rem; font-weight: 700; text-decoration: none; border-radius: 12px; cursor: grab; transition: all 0.2s ease; box-shadow: 0 4px 20px var(--accent-glow); user-select: none; }
  .bookmarklet-link:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--accent-glow); }
  .drag-hint { margin-top: 1rem; font-size: 0.82rem; color: var(--text-dim); text-align: center; }
  .drag-hint strong { color: var(--text); }

  .install-steps { text-align: left; }
  .install-step { display: flex; gap: 1rem; align-items: flex-start; margin-bottom: 1.25rem; }
  .install-step-num { flex-shrink: 0; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 8px; background: var(--accent-glow); color: var(--accent); font-family: var(--mono); font-size: 0.8rem; font-weight: 700; }
  .install-step p { font-size: 0.9rem; color: var(--text-dim); }
  .install-step p strong { color: var(--text); }

  .url-box { width: 100%; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 12px 14px; font-family: var(--mono); font-size: 0.7rem; color: var(--accent); word-break: break-all; max-height: 80px; overflow-y: auto; margin: 0.75rem 0; line-height: 1.4; cursor: pointer; transition: border-color 0.2s; }
  .url-box:hover { border-color: var(--accent); }

  .action-btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: var(--accent); color: var(--bg); border: none; border-radius: 10px; font-family: var(--sans); font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
  .action-btn:hover { opacity: 0.9; transform: translateY(-1px); }
  .action-btn.secondary { background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
  .action-btn.secondary:hover { border-color: var(--accent); }

  .copy-confirm { font-size: 0.82rem; color: var(--green); margin-top: 0.5rem; display: none; }

  .browser-detect { font-size: 0.82rem; color: var(--green); margin-bottom: 1rem; font-family: var(--mono); }

  .steps { padding: 4rem 0; }
  .steps h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 2rem; text-align: center; }
  .step-list { display: flex; flex-direction: column; gap: 1rem; }
  .step-item { display: flex; gap: 1.25rem; align-items: flex-start; padding: 1.5rem; background: var(--surface); border: 1px solid var(--border); border-radius: 14px; }
  .step-item:hover { border-color: #353540; }
  .step-num { flex-shrink: 0; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 10px; font-family: var(--mono); font-size: 0.85rem; font-weight: 700; }
  .step-num.s1 { background: rgba(152,152,212,0.12); color: var(--gpt); }
  .step-num.s2 { background: var(--accent-glow); color: var(--accent); }
  .step-num.s3 { background: rgba(126,184,160,0.12); color: var(--green); }
  .step-text h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.25rem; }
  .step-text p { font-size: 0.88rem; color: var(--text-dim); }

  .exports-section { padding: 0 0 4rem; }
  .exports-section h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 2rem; text-align: center; }
  .export-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
  .export-card { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 1.5rem; text-align: center; }
  .export-card .icon { font-size: 2rem; margin-bottom: 0.75rem; }
  .export-card h3 { font-size: 0.9rem; font-weight: 600; margin-bottom: 0.25rem; }
  .export-card p { font-size: 0.8rem; color: var(--text-dim); }
  .export-card .filename { display: inline-block; margin-top: 0.75rem; font-family: var(--mono); font-size: 0.7rem; padding: 3px 10px; background: var(--surface2); border-radius: 4px; color: var(--accent); }

  .fallback-box { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; padding: 2rem; margin-bottom: 1rem; }
  .fallback-box h3 { font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem; }
  .fallback-box p { font-size: 0.88rem; color: var(--text-dim); margin-bottom: 0.5rem; }

  .faq { padding: 0 0 4rem; }
  .faq h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 2rem; text-align: center; }
  .faq-item { padding: 1.25rem 0; border-bottom: 1px solid var(--border); }
  .faq-item:first-child { border-top: 1px solid var(--border); }
  .faq-item h3 { font-size: 0.92rem; font-weight: 600; margin-bottom: 0.4rem; }
  .faq-item p { font-size: 0.88rem; color: var(--text-dim); }

  .footer { padding: 3rem 0; border-top: 1px solid var(--border); text-align: center; font-size: 0.8rem; color: var(--text-dim); }
  .footer a { color: var(--accent); text-decoration: none; }
  .footer a:hover { text-decoration: underline; }
  .footer p { margin-bottom: 0.4rem; }

  @media (max-width: 640px) { .hero { padding: 4rem 0 3rem; } .install-section { padding: 2rem 1.5rem; } .export-grid { grid-template-columns: 1fr; } .container { padding: 0 1.25rem; } .tab-btn { padding: 6px 12px; font-size: 0.78rem; } }
</style>
</head>
<body>
<div class="container">

  <div class="hero">
    <div class="hero-badge">v2.2 — OPEN SOURCE — MIT LICENSE</div>
    <h1>Move from <span class="gpt">ChatGPT</span> <span class="arrow">→</span> <span class="claude">Claude</span></h1>
    <p>Export your memories, every conversation, and all custom instructions. No extensions to install. No data leaves your browser.</p>
  </div>

  <!-- ========== INSTALL SECTION ========== -->
  <div class="install-section" id="install">
    <h2>Add the export tool</h2>
    <p class="subtitle">Choose your browser, follow the steps. Takes 30 seconds.</p>

    <div id="browser-detect" class="browser-detect"></div>

    <div class="tab-bar">
      <button class="tab-btn active" onclick="showTab('chrome')">Chrome / Edge / Brave</button>
      <button class="tab-btn" onclick="showTab('firefox')">Firefox</button>
      <button class="tab-btn" onclick="showTab('paste')">Any browser</button>
    </div>

    <!-- CHROME TAB -->
    <div class="tab-content active" id="tab-chrome">
      <div style="text-align:center; margin-bottom:1.5rem;">
        <a class="bookmarklet-link" id="bookmarklet-btn" href="javascript:%21function%28%29%7Bif%28document.getElementById%28%22gpt2claude-panel%22%29%29%7Bvar%20e%3Ddocument.getElementById%28%22gpt2claude-panel%22%29%3Breturn%20e.style.animation%3D%22g2c-shake%200.3s%20ease-in-out%22%2Cvoid%20setTimeout%28function%28%29%7Be.style.animation%3D%22%22%7D%2C300%29%7Dvar%20t%3Ddocument.createElement%28%22style%22%29%3Bt.textContent%3D%22%20%20%20%20%40keyframes%20g2c-fadein%20%7B%20from%20%7B%20opacity%3A%200%3B%20transform%3A%20translateY%2820px%29%20scale%280.95%29%3B%20%7D%20to%20%7B%20opacity%3A%201%3B%20transform%3A%20translateY%280%29%20scale%281%29%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-shake%20%7B%200%25%2C100%25%20%7B%20transform%3A%20translateX%280%29%3B%20%7D%2025%25%20%7B%20transform%3A%20translateX%28-5px%29%3B%20%7D%2075%25%20%7B%20transform%3A%20translateX%285px%29%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-spin%20%7B%20to%20%7B%20transform%3A%20rotate%28360deg%29%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-pulse%20%7B%200%25%2C100%25%20%7B%20opacity%3A%201%3B%20%7D%2050%25%20%7B%20opacity%3A%200.5%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-indeterminate%20%7B%200%25%20%7B%20left%3A%20-30%25%3B%20width%3A%2030%25%3B%20%7D%2050%25%20%7B%20left%3A%2050%25%3B%20width%3A%2030%25%3B%20%7D%20100%25%20%7B%20left%3A%20100%25%3B%20width%3A%2030%25%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-pulse-count%20%7B%200%25%2C100%25%20%7B%20opacity%3A%201%3B%20%7D%2050%25%20%7B%20opacity%3A%200.7%3B%20%7D%20%7D%20%20%20%20%40keyframes%20g2c-dot-bounce%20%7B%200%25%2C80%25%2C100%25%20%7B%20transform%3A%20translateY%280%29%3B%20%7D%2040%25%20%7B%20transform%3A%20translateY%28-4px%29%3B%20%7D%20%7D%20%20%20%20.g2c-progress-fill.indeterminate%20%7B%20position%3A%20relative%3B%20width%3A%20100%25%20%21important%3B%20background%3A%20none%20%21important%3B%20overflow%3A%20hidden%3B%20%7D%20%20%20%20.g2c-progress-fill.indeterminate%3A%3Aafter%20%7B%20content%3A%20%27%27%3B%20position%3A%20absolute%3B%20top%3A%200%3B%20left%3A%20-30%25%3B%20width%3A%2030%25%3B%20height%3A%20100%25%3B%20background%3A%20linear-gradient%2890deg%2C%20transparent%2C%20%23d4a574%2C%20transparent%29%3B%20border-radius%3A%203px%3B%20animation%3A%20g2c-indeterminate%201.5s%20ease-in-out%20infinite%3B%20%7D%20%20%20%20.g2c-scan-hero%20%7B%20text-align%3A%20center%3B%20padding%3A%2020px%200%2010px%3B%20%7D%20%20%20%20.g2c-scan-hero%20.g2c-scan-count%20%7B%20font-size%3A%2042px%3B%20font-weight%3A%20800%3B%20color%3A%20%23d4a574%3B%20font-variant-numeric%3A%20tabular-nums%3B%20animation%3A%20g2c-pulse-count%202s%20ease-in-out%20infinite%3B%20line-height%3A%201%3B%20%7D%20%20%20%20.g2c-scan-hero%20.g2c-scan-label%20%7B%20font-size%3A%2012px%3B%20color%3A%20%23888%3B%20margin-top%3A%204px%3B%20%7D%20%20%20%20.g2c-scan-hero%20.g2c-scan-status%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20gap%3A%206px%3B%20margin-top%3A%2012px%3B%20font-size%3A%2012px%3B%20color%3A%20%23999%3B%20%7D%20%20%20%20.g2c-scan-dots%20%7B%20display%3A%20flex%3B%20gap%3A%203px%3B%20%7D%20%20%20%20.g2c-scan-dots%20span%20%7B%20width%3A%204px%3B%20height%3A%204px%3B%20background%3A%20%23d4a574%3B%20border-radius%3A%2050%25%3B%20animation%3A%20g2c-dot-bounce%201.2s%20ease-in-out%20infinite%3B%20%7D%20%20%20%20.g2c-scan-dots%20span%3Anth-child%282%29%20%7B%20animation-delay%3A%200.15s%3B%20%7D%20%20%20%20.g2c-scan-dots%20span%3Anth-child%283%29%20%7B%20animation-delay%3A%200.3s%3B%20%7D%20%20%20%20.g2c-scan-models%20%7B%20display%3A%20flex%3B%20flex-wrap%3A%20wrap%3B%20gap%3A%204px%3B%20justify-content%3A%20center%3B%20margin-top%3A%2014px%3B%20padding-top%3A%2014px%3B%20border-top%3A%201px%20solid%20%232a2a35%3B%20%7D%20%20%20%20.g2c-scan-tag%20%7B%20font-size%3A%2010px%3B%20padding%3A%203px%2010px%3B%20background%3A%20%231e1e26%3B%20border%3A%201px%20solid%20%232a2a35%3B%20border-radius%3A%2020px%3B%20color%3A%20%23a0a0e0%3B%20font-family%3A%20%27SF%20Mono%27%2C%20Consolas%2C%20monospace%3B%20%7D%20%20%20%20.g2c-scan-reassure%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23555%3B%20text-align%3A%20center%3B%20margin-top%3A%2012px%3B%20%7D%20%20%20%20.g2c-dl-hero%20%7B%20text-align%3A%20center%3B%20padding%3A%2016px%200%208px%3B%20%7D%20%20%20%20.g2c-dl-hero%20.g2c-dl-count%20%7B%20font-size%3A%2028px%3B%20font-weight%3A%20700%3B%20color%3A%20%237eb8a0%3B%20%7D%20%20%20%20.g2c-dl-hero%20.g2c-dl-of%20%7B%20font-size%3A%2014px%3B%20color%3A%20%23555%3B%20%7D%20%20%20%20.g2c-dl-hero%20.g2c-dl-title%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23888%3B%20margin-top%3A%206px%3B%20white-space%3A%20nowrap%3B%20overflow%3A%20hidden%3B%20text-overflow%3A%20ellipsis%3B%20padding%3A%200%2010px%3B%20%7D%20%20%20%20.g2c-dl-pct%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23d4a574%3B%20font-family%3A%20%27SF%20Mono%27%2C%20Consolas%2C%20monospace%3B%20text-align%3A%20right%3B%20margin-top%3A%206px%3B%20%7D%20%20%20%20.g2c-dl-remaining%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23666%3B%20text-align%3A%20center%3B%20margin-top%3A%208px%3B%20%7D%20%20%20%20.g2c-complete%20%7B%20text-align%3A%20center%3B%20padding%3A%2020px%200%2010px%3B%20%7D%20%20%20%20.g2c-complete-icon%20%7B%20font-size%3A%2036px%3B%20margin-bottom%3A%206px%3B%20%7D%20%20%20%20.g2c-complete-title%20%7B%20font-size%3A%2018px%3B%20font-weight%3A%20700%3B%20color%3A%20%237eb8a0%3B%20%7D%20%20%20%20.g2c-complete-sub%20%7B%20font-size%3A%2012px%3B%20color%3A%20%23888%3B%20margin-top%3A%206px%3B%20%7D%20%20%20%20.g2c-whatsnext%20%7B%20margin%3A%2016px%200%3B%20padding%3A%2014px%3B%20background%3A%20%23141418%3B%20border%3A%201px%20solid%20%23252530%3B%20border-radius%3A%2010px%3B%20%7D%20%20%20%20.g2c-whatsnext-title%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23888%3B%20margin-bottom%3A%2010px%3B%20font-weight%3A%20600%3B%20%7D%20%20%20%20.g2c-whatsnext-item%20%7B%20font-size%3A%2012px%3B%20color%3A%20%23ccc%3B%20line-height%3A%201.8%3B%20margin-bottom%3A%2010px%3B%20%7D%20%20%20%20.g2c-whatsnext-item%3Alast-child%20%7B%20margin-bottom%3A%200%3B%20%7D%20%20%20%20.g2c-whatsnext-item%20a%20%7B%20color%3A%20%23d4a574%3B%20text-decoration%3A%20none%3B%20%7D%20%20%20%20.g2c-whatsnext-item%20a%3Ahover%20%7B%20text-decoration%3A%20underline%3B%20%7D%20%20%20%20.g2c-whatsnext-badge%20%7B%20font-size%3A%2010px%3B%20color%3A%20%237eb8a0%3B%20background%3A%20rgba%28126%2C184%2C160%2C0.12%29%3B%20padding%3A%201px%206px%3B%20border-radius%3A%204px%3B%20%7D%20%20%20%20.g2c-copy-log%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20%23666%3B%20font-size%3A%2011px%3B%20cursor%3A%20pointer%3B%20padding%3A%206px%200%3B%20margin-top%3A%2010px%3B%20margin-left%3A%2012px%3B%20%7D%20%20%20%20.g2c-copy-log%3Ahover%20%7B%20color%3A%20%23aaa%3B%20%7D%20%20%20%20%23gpt2claude-panel%20%7B%20position%3A%20fixed%3B%20top%3A%2050%25%3B%20right%3A%2024px%3B%20transform%3A%20translateY%28-50%25%29%3B%20width%3A%20360px%3B%20background%3A%20%231a1a1f%3B%20border%3A%201px%20solid%20%23333340%3B%20border-radius%3A%2016px%3B%20box-shadow%3A%200%2025px%2060px%20rgba%280%2C0%2C0%2C0.5%29%2C%200%200%200%201px%20rgba%28255%2C255%2C255%2C0.06%29%3B%20z-index%3A%20999999%3B%20font-family%3A%20-apple-system%2C%20BlinkMacSystemFont%2C%20%27Segoe%20UI%27%2C%20sans-serif%3B%20color%3A%20%23e8e8ec%3B%20animation%3A%20g2c-fadein%200.3s%20ease-out%3B%20%7D%20%20%20%20%23gpt2claude-panel%20%2A%20%7B%20box-sizing%3A%20border-box%3B%20margin%3A%200%3B%20padding%3A%200%3B%20%7D%20%20%20%20.g2c-header%20%7B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20padding%3A%2018px%2022px%2014px%3B%20border-bottom%3A%201px%20solid%20%232a2a35%3B%20background%3A%20%231e1e24%3B%20border-radius%3A%2016px%2016px%200%200%3B%20%7D%20%20%20%20.g2c-title%20%7B%20font-size%3A%2015px%3B%20font-weight%3A%20700%3B%20letter-spacing%3A%20-0.01em%3B%20%7D%20%20%20%20.g2c-title%20span.gpt%20%7B%20color%3A%20%23a0a0e0%3B%20%7D%20%20%20%20.g2c-title%20span.arrow%20%7B%20color%3A%20%23555%3B%20margin%3A%200%204px%3B%20%7D%20%20%20%20.g2c-title%20span.claude%20%7B%20color%3A%20%23d4a574%3B%20%7D%20%20%20%20.g2c-version%20%7B%20font-size%3A%2010px%3B%20color%3A%20%23666%3B%20font-weight%3A%20600%3B%20margin-top%3A%202px%3B%20%7D%20%20%20%20.g2c-close%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20%23777%3B%20font-size%3A%2020px%3B%20cursor%3A%20pointer%3B%20padding%3A%204px%208px%3B%20border-radius%3A%206px%3B%20line-height%3A%201%3B%20%7D%20%20%20%20.g2c-close%3Ahover%20%7B%20background%3A%20%23252530%3B%20color%3A%20%23e8e8ec%3B%20%7D%20%20%20%20.g2c-body%20%7B%20padding%3A%2018px%2022px%2014px%3B%20%7D%20%20%20%20.g2c-btn%20%7B%20width%3A%20100%25%3B%20padding%3A%2014px%2016px%3B%20border%3A%201px%20solid%20%23333340%3B%20border-radius%3A%2012px%3B%20background%3A%20%23222228%3B%20color%3A%20%23e8e8ec%3B%20font-size%3A%2013px%3B%20font-weight%3A%20600%3B%20cursor%3A%20pointer%3B%20text-align%3A%20left%3B%20margin-bottom%3A%2010px%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%2012px%3B%20transition%3A%20all%200.15s%20ease%3B%20position%3A%20relative%3B%20overflow%3A%20hidden%3B%20%7D%20%20%20%20.g2c-btn%3Ahover%20%7B%20background%3A%20%232a2a32%3B%20border-color%3A%20%23444450%3B%20transform%3A%20translateY%28-1px%29%3B%20%7D%20%20%20%20.g2c-btn%3Aactive%20%7B%20transform%3A%20translateY%280%29%3B%20%7D%20%20%20%20.g2c-btn.running%20%7B%20pointer-events%3A%20none%3B%20border-color%3A%20%23d4a574%3B%20%7D%20%20%20%20.g2c-btn.done%20%7B%20border-color%3A%20%237eb8a0%3B%20%7D%20%20%20%20.g2c-btn.error%20%7B%20border-color%3A%20%23e07070%3B%20%7D%20%20%20%20.g2c-btn-icon%20%7B%20font-size%3A%2020px%3B%20width%3A%2028px%3B%20text-align%3A%20center%3B%20flex-shrink%3A%200%3B%20%7D%20%20%20%20.g2c-btn-text%20%7B%20flex%3A%201%3B%20%7D%20%20%20%20.g2c-btn-sub%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23777%3B%20font-weight%3A%20400%3B%20margin-top%3A%203px%3B%20%7D%20%20%20%20.g2c-progress%20%7B%20margin-top%3A%2010px%3B%20%7D%20%20%20%20.g2c-progress-bar%20%7B%20width%3A%20100%25%3B%20height%3A%205px%3B%20background%3A%20%23252530%3B%20border-radius%3A%203px%3B%20overflow%3A%20hidden%3B%20%7D%20%20%20%20.g2c-progress-fill%20%7B%20height%3A%20100%25%3B%20background%3A%20linear-gradient%2890deg%2C%20%23d4a574%2C%20%23e8c49a%29%3B%20border-radius%3A%203px%3B%20transition%3A%20width%200.3s%20ease%3B%20width%3A%200%25%3B%20%7D%20%20%20%20.g2c-progress-text%20%7B%20font-size%3A%2011px%3B%20color%3A%20%23999%3B%20margin-top%3A%206px%3B%20%7D%20%20%20%20.g2c-log%20%7B%20margin-top%3A%2014px%3B%20max-height%3A%20140px%3B%20overflow-y%3A%20auto%3B%20background%3A%20%23141418%3B%20border%3A%201px%20solid%20%23252530%3B%20border-radius%3A%2010px%3B%20padding%3A%2010px%2012px%3B%20font-family%3A%20%27SF%20Mono%27%2C%20%27Consolas%27%2C%20monospace%3B%20font-size%3A%2011px%3B%20line-height%3A%201.6%3B%20color%3A%20%23999%3B%20display%3A%20none%3B%20%7D%20%20%20%20.g2c-log.visible%20%7B%20display%3A%20block%3B%20%7D%20%20%20%20.g2c-log-entry%20%7B%20white-space%3A%20nowrap%3B%20overflow%3A%20hidden%3B%20text-overflow%3A%20ellipsis%3B%20%7D%20%20%20%20.g2c-log-entry.error%20%7B%20color%3A%20%23e07070%3B%20%7D%20%20%20%20.g2c-log-entry.success%20%7B%20color%3A%20%237eb8a0%3B%20%7D%20%20%20%20.g2c-footer%20%7B%20padding%3A%2014px%2022px%3B%20border-top%3A%201px%20solid%20%23252530%3B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20%7D%20%20%20%20.g2c-footer-text%20%7B%20font-size%3A%2010px%3B%20color%3A%20%23555%3B%20%7D%20%20%20%20.g2c-footer-link%20%7B%20font-size%3A%2010px%3B%20color%3A%20%23d4a574%3B%20text-decoration%3A%20none%3B%20%7D%20%20%20%20.g2c-footer-link%3Ahover%20%7B%20text-decoration%3A%20underline%3B%20%7D%20%20%20%20.g2c-spinner%20%7B%20display%3A%20inline-block%3B%20width%3A%2016px%3B%20height%3A%2016px%3B%20border%3A%202px%20solid%20%23444%3B%20border-top-color%3A%20%23d4a574%3B%20border-radius%3A%2050%25%3B%20animation%3A%20g2c-spin%200.6s%20linear%20infinite%3B%20%7D%20%20%20%20.g2c-toggle-log%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20%23666%3B%20font-size%3A%2011px%3B%20cursor%3A%20pointer%3B%20padding%3A%206px%200%3B%20margin-top%3A%2010px%3B%20%7D%20%20%20%20.g2c-toggle-log%3Ahover%20%7B%20color%3A%20%23aaa%3B%20%7D%20%20%20%20.g2c-drag-handle%20%7B%20cursor%3A%20move%3B%20%7D%20%20%20%20.g2c-divider%20%7B%20height%3A%201px%3B%20background%3A%20%232a2a35%3B%20margin%3A%206px%200%2010px%3B%20%7D%20%20%20%20.g2c-filter-panel%20%7B%20margin-top%3A%2010px%3B%20%7D%20%20%20%20.g2c-filter-section%20%7B%20margin-bottom%3A%2012px%3B%20%7D%20%20%20%20.g2c-filter-label%20%7B%20font-size%3A%2010px%3B%20color%3A%20%23888%3B%20font-weight%3A%20600%3B%20text-transform%3A%20uppercase%3B%20letter-spacing%3A%200.05em%3B%20margin-bottom%3A%206px%3B%20%7D%20%20%20%20.g2c-filter-models%20%7B%20max-height%3A%20120px%3B%20overflow-y%3A%20auto%3B%20background%3A%20%23141418%3B%20border%3A%201px%20solid%20%23252530%3B%20border-radius%3A%208px%3B%20padding%3A%206px%208px%3B%20%7D%20%20%20%20.g2c-model-row%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20padding%3A%203px%200%3B%20font-size%3A%2012px%3B%20cursor%3A%20pointer%3B%20color%3A%20%23ccc%3B%20%7D%20%20%20%20.g2c-model-row%3Ahover%20%7B%20color%3A%20%23fff%3B%20%7D%20%20%20%20.g2c-model-row%20input%20%7B%20margin-right%3A%208px%3B%20accent-color%3A%20%23d4a574%3B%20%7D%20%20%20%20.g2c-model-row%20.cnt%20%7B%20color%3A%20%23666%3B%20margin-left%3A%20auto%3B%20font-size%3A%2010px%3B%20font-family%3A%20monospace%3B%20%7D%20%20%20%20.g2c-filter-row%20%7B%20display%3A%20flex%3B%20gap%3A%208px%3B%20align-items%3A%20center%3B%20margin-bottom%3A%206px%3B%20%7D%20%20%20%20.g2c-filter-input%20%7B%20flex%3A%201%3B%20padding%3A%206px%208px%3B%20background%3A%20%23141418%3B%20border%3A%201px%20solid%20%23252530%3B%20border-radius%3A%206px%3B%20color%3A%20%23e8e8ec%3B%20font-size%3A%2012px%3B%20font-family%3A%20monospace%3B%20outline%3A%20none%3B%20%7D%20%20%20%20.g2c-filter-input%3Afocus%20%7B%20border-color%3A%20%23d4a574%3B%20%7D%20%20%20%20.g2c-filter-input%3A%3Aplaceholder%20%7B%20color%3A%20%23555%3B%20%7D%20%20%20%20.g2c-filter-summary%20%7B%20font-size%3A%2012px%3B%20color%3A%20%23d4a574%3B%20padding%3A%208px%200%3B%20font-weight%3A%20600%3B%20%7D%20%20%20%20.g2c-filter-drop%20%7B%20border%3A%201px%20dashed%20%23333340%3B%20border-radius%3A%208px%3B%20padding%3A%2010px%3B%20text-align%3A%20center%3B%20font-size%3A%2011px%3B%20color%3A%20%23666%3B%20cursor%3A%20pointer%3B%20transition%3A%20all%200.15s%3B%20%7D%20%20%20%20.g2c-filter-drop%3Ahover%20%7B%20border-color%3A%20%23d4a574%3B%20color%3A%20%23999%3B%20%7D%20%20%20%20.g2c-filter-drop.active%20%7B%20border-color%3A%20%237eb8a0%3B%20color%3A%20%237eb8a0%3B%20%7D%20%20%20%20.g2c-select-btns%20%7B%20display%3A%20flex%3B%20gap%3A%206px%3B%20margin-top%3A%204px%3B%20%7D%20%20%20%20.g2c-select-btns%20button%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20%23666%3B%20font-size%3A%2010px%3B%20cursor%3A%20pointer%3B%20padding%3A%200%3B%20%7D%20%20%20%20.g2c-select-btns%20button%3Ahover%20%7B%20color%3A%20%23d4a574%3B%20%7D%20%20%22%2Cdocument.head.appendChild%28t%29%3Bvar%20n%3Ddocument.createElement%28%22div%22%29%3Bn.id%3D%22gpt2claude-panel%22%2Cn.innerHTML%3D%27%20%20%20%20%3Cdiv%20class%3D%22g2c-header%20g2c-drag-handle%22%3E%20%20%20%20%20%20%3Cdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-title%22%3E%3Cspan%20class%3D%22gpt%22%3EGPT%3C%2Fspan%3E%3Cspan%20class%3D%22arrow%22%3E%E2%86%92%3C%2Fspan%3E%3Cspan%20class%3D%22claude%22%3EClaude%3C%2Fspan%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-version%22%3EMigration%20Kit%20v2.2%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-close%22%20id%3D%22g2c-close%22%3E%C3%97%3C%2Fbutton%3E%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%3Cdiv%20class%3D%22g2c-body%22%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-btn%22%20id%3D%22g2c-btn-memory%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-icon%22%3E%F0%9F%A7%A0%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-text%22%3E%20%20%20%20%20%20%20%20%20%20Export%20Memories%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-sub%22%3EFacts%20ChatGPT%20learned%20about%20you%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fbutton%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-btn%22%20id%3D%22g2c-btn-convos%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-icon%22%3E%F0%9F%92%AC%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-text%22%3E%20%20%20%20%20%20%20%20%20%20Export%20All%20Conversations%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-sub%22%3EScans%20first%2C%20then%20you%20choose%20what%20to%20download%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fbutton%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-btn%22%20id%3D%22g2c-btn-instructions%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-icon%22%3E%E2%9A%99%EF%B8%8F%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-text%22%3E%20%20%20%20%20%20%20%20%20%20Export%20Instructions%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-sub%22%3ECustom%20instructions%20%26amp%3B%20settings%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fbutton%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-btn%22%20id%3D%22g2c-btn-all%22%20style%3D%22border-color%3A%23d4a574%3Bbackground%3A%23222228%3B%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-icon%22%3E%F0%9F%93%A5%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-text%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%23d4a574%3B%22%3EExport%20Everything%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-sub%22%3EAll%20three%20in%20one%20click%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fbutton%3E%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-progress%22%20id%3D%22g2c-progress%22%20style%3D%22display%3Anone%3B%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-progress-bar%22%3E%3Cdiv%20class%3D%22g2c-progress-fill%22%20id%3D%22g2c-progress-fill%22%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-progress-text%22%20id%3D%22g2c-progress-text%22%3E%3C%2Fdiv%3E%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-toggle-log%22%20id%3D%22g2c-toggle-log%22%3EShow%20log%20%E2%96%BC%3C%2Fbutton%3E%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-copy-log%22%20id%3D%22g2c-copy-log%22%3ECopy%20log%3C%2Fbutton%3E%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-log%22%20id%3D%22g2c-log%22%3E%3C%2Fdiv%3E%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%3Cdiv%20class%3D%22g2c-footer%22%3E%20%20%20%20%20%20%3Cspan%20class%3D%22g2c-footer-text%22%3EAll%20data%20stays%20in%20your%20browser%3C%2Fspan%3E%20%20%20%20%20%20%3Ca%20class%3D%22g2c-footer-link%22%20href%3D%22https%3A%2F%2Fgithub.com%2FSiamsnus%2FGPT2Claude-Migration-Kit%22%20target%3D%22_blank%22%3EGitHub%3C%2Fa%3E%20%20%20%20%3C%2Fdiv%3E%20%20%27%2Cdocument.body.appendChild%28n%29%3Bvar%20o%3D%211%2Ca%3D0%2Cr%3D0%3Bn.querySelector%28%22.g2c-drag-handle%22%29.addEventListener%28%22mousedown%22%2Cfunction%28e%29%7Bif%28%21e.target.classList.contains%28%22g2c-close%22%29%29%7Bo%3D%210%3Bvar%20t%3Dn.getBoundingClientRect%28%29%3Ba%3De.clientX-t.left%2Cr%3De.clientY-t.top%2Cn.style.transition%3D%22none%22%2Ce.preventDefault%28%29%7D%7D%29%2Cdocument.addEventListener%28%22mousemove%22%2Cfunction%28e%29%7Bo%26%26%28n.style.right%3D%22auto%22%2Cn.style.transform%3D%22none%22%2Cn.style.left%3De.clientX-a%2B%22px%22%2Cn.style.top%3De.clientY-r%2B%22px%22%29%7D%29%2Cdocument.addEventListener%28%22mouseup%22%2Cfunction%28%29%7Bo%3D%211%2Cn.style.transition%3D%22%22%7D%29%3Bvar%20i%3Ddocument.getElementById%28%22g2c-log%22%29%3Bdocument.getElementById%28%22g2c-progress%22%29%2Cdocument.getElementById%28%22g2c-progress-fill%22%29%2Cdocument.getElementById%28%22g2c-progress-text%22%29%3Bfunction%20s%28e%2Ct%29%7Bvar%20n%3Ddocument.createElement%28%22div%22%29%3Bn.className%3D%22g2c-log-entry%22%2B%28t%3F%22%20%22%2Bt%3A%22%22%29%2Cn.textContent%3De%2Ci.appendChild%28n%29%2Ci.scrollTop%3Di.scrollHeight%7Dfunction%20c%28e%2Ct%2Cn%29%7Be.className%3D%22g2c-btn%20%22%2Bt%3Bvar%20o%3De.querySelector%28%22.g2c-btn-icon%22%29%3B%22running%22%3D%3D%3Dt%3Fo.innerHTML%3D%27%3Cdiv%20class%3D%22g2c-spinner%22%3E%3C%2Fdiv%3E%27%3A%22done%22%3D%3D%3Dt%3Fo.textContent%3D%22%E2%9C%85%22%3A%22error%22%3D%3D%3Dt%26%26%28o.textContent%3D%22%E2%9D%8C%22%29%2Cn%26%26%28e.querySelector%28%22.g2c-btn-sub%22%29.textContent%3Dn%29%7Dfunction%20l%28e%2Ct%2Cn%29%7Bvar%20o%3Dnew%20Blob%28%5Be%5D%2C%7Btype%3An%7C%7C%22text%2Fplain%22%7D%29%2Ca%3DURL.createObjectURL%28o%29%2Cr%3Ddocument.createElement%28%22a%22%29%3Br.href%3Da%2Cr.download%3Dt%2Cdocument.body.appendChild%28r%29%2Cr.click%28%29%2Cdocument.body.removeChild%28r%29%2CURL.revokeObjectURL%28a%29%2Cs%28%22Downloaded%3A%20%22%2Bt%2C%22success%22%29%7Dfunction%20d%28e%2Ct%2Cn%29%7Bvar%20o%3Ddocument.getElementById%28e%29%3Breturn%20o%3Fo.addEventListener%28t%2Cn%29%3As%28%22Warning%3A%20element%20%23%22%2Be%2B%22%20not%20found%22%2C%22error%22%29%2Co%7Dvar%20g%3Dnull%3Basync%20function%20p%28%29%7Bif%28g%29return%20g%3Bs%28%22Authenticating...%22%29%3Bvar%20e%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fapi%2Fauth%2Fsession%22%2C%7Bcredentials%3A%22include%22%7D%29%3Bif%28200%21%3D%3De.status%29throw%20new%20Error%28%22Auth%20failed%20%28HTTP%20%22%2Be.status%2B%22%29.%20Are%20you%20logged%20in%3F%22%29%3Bvar%20t%3Dawait%20e.json%28%29%3Bif%28%21t.accessToken%29throw%20new%20Error%28%22No%20token%20found.%20Please%20refresh%20chatgpt.com%20and%20try%20again.%22%29%3Breturn%20g%3Dt.accessToken%2Cs%28%22Authenticated%20OK%22%29%2Cg%7Dfunction%20u%28e%29%7Breturn%20e.default_model_slug%7C%7Ce.model%7C%7Ce.model_slug%7C%7Ce.gpt_model%7C%7C%22unknown%22%7Dfunction%20m%28e%29%7Bvar%20t%3De.update_time%7C%7Ce.updated_at%7C%7Ce.create_time%7C%7Ce.created_at%7C%7C0%3Bif%28%21t%29return%200%3Bif%28%22string%22%3D%3Dtypeof%20t%29%7Bvar%20n%3Dnew%20Date%28t%29.getTime%28%29%2F1e3%3Breturn%20isNaN%28n%29%3F0%3An%7Dreturn%20t%3E1e12%3Ft%2F1e3%3At%7Dasync%20function%20f%28%29%7Bvar%20e%3Ddocument.getElementById%28%22g2c-btn-memory%22%29%3Bc%28e%2C%22running%22%2C%22Exporting...%22%29%3Btry%7Bvar%20t%3Dawait%20p%28%29%3Bs%28%22Fetching%20memories...%22%29%3Bvar%20n%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fmemories%22%2C%7Bcredentials%3A%22include%22%2Cheaders%3A%7BAuthorization%3A%22Bearer%20%22%2Bt%7D%7D%29%3Bif%28200%21%3D%3Dn.status%29throw%20new%20Error%28%22Could%20not%20fetch%20memories%20%28HTTP%20%22%2Bn.status%2B%22%29%22%29%3Bvar%20o%3Dawait%20n.json%28%29%2Ca%3Do.memories%7C%7Co.results%7C%7Co%2Cr%3D%22%23%20ChatGPT%20Memory%20Export%5Cn%22%3Br%2B%3D%22%23%20Exported%3A%20%22%2B%28new%20Date%29.toISOString%28%29%2B%22%5Cn%22%2Cr%2B%3D%22%23%20Tool%3A%20GPT2Claude%20Migration%20Kit%20v2.2%5Cn%5Cn%22%3Bvar%20i%3D0%3Bif%28Array.isArray%28a%29%29%7Bi%3Da.length%3Bfor%28var%20d%3D0%3Bd%3Ca.length%3Bd%2B%2B%29%7Bvar%20g%3Da%5Bd%5D%3Br%2B%3Dd%2B1%2B%22.%20%22%2B%28g.content%7C%7Cg.value%7C%7Cg.text%7C%7Cg.memory%7C%7CJSON.stringify%28g%29%29%2B%22%5Cn%22%7D%7Delse%20r%2B%3DJSON.stringify%28a%2Cnull%2C2%29%3Bs%28%22Found%20%22%2Bi%2B%22%20memories%22%29%2Cl%28r%2C%22chatgpt_memories.md%22%2C%22text%2Fmarkdown%22%29%2Cc%28e%2C%22done%22%2Ci%2B%22%20memories%20exported%22%29%7Dcatch%28t%29%7Bs%28%22Memory%20export%20failed%3A%20%22%2Bt.message%2C%22error%22%29%2Cc%28e%2C%22error%22%2Ct.message%29%7D%7Dvar%20v%3D%5B%5D%2Ch%3D%7B%7D%3Basync%20function%20x%28%29%7Bvar%20e%3Ddocument.getElementById%28%22g2c-btn-convos%22%29%3Bc%28e%2C%22running%22%2C%22Scanning...%22%29%3Bvar%20t%3Ddocument.getElementById%28%22g2c-progress%22%29%3Bt.style.display%3D%22block%22%2C%28F%3Ddocument.getElementById%28%22g2c-progress-fill%22%29%29.classList.add%28%22indeterminate%22%29%2CF.style.width%3D%22100%25%22%3Bvar%20o%3Ddocument.createElement%28%22div%22%29%3Bo.className%3D%22g2c-scan-hero%22%2Co.id%3D%22g2c-scan-hero%22%2Co.innerHTML%3D%27%3Cdiv%20class%3D%22g2c-scan-count%22%20id%3D%22g2c-scan-count%22%3E0%3C%2Fdiv%3E%3Cdiv%20class%3D%22g2c-scan-label%22%3Econversations%20found%3C%2Fdiv%3E%3Cdiv%20class%3D%22g2c-scan-status%22%20id%3D%22g2c-scan-status%22%3E%3Cspan%20class%3D%22g2c-scan-dots%22%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%20Scanning%20your%20conversations%E2%80%A6%3C%2Fdiv%3E%3Cdiv%20class%3D%22g2c-scan-models%22%20id%3D%22g2c-scan-models%22%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22g2c-scan-reassure%22%3EFilter%20options%20appear%20when%20scan%20completes%3C%2Fdiv%3E%27%2Ct.parentNode.insertBefore%28o%2Ct.nextSibling%29%3Btry%7Bvar%20a%3D%7BAuthorization%3A%22Bearer%20%22%2Bawait%20p%28%29%7D%3Bv%3D%5B%5D%3Bvar%20r%3D0%2Ci%3D%7B%7D%3Bfor%28s%28%22Scanning%20conversation%20list...%22%29%3B%3B%29%7Bvar%20l%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fconversations%3Foffset%3D%22%2Br%2B%22%26limit%3D100%26order%3Dupdated%22%2C%7Bcredentials%3A%22include%22%2Cheaders%3Aa%7D%29%3Bif%28200%21%3D%3Dl.status%29throw%20new%20Error%28%22Could%20not%20get%20conversations%20%28HTTP%20%22%2Bl.status%2B%22%29%22%29%3Bvar%20g%3D%28await%20l.json%28%29%29.items%7C%7C%5B%5D%3Bif%28s%28%22Batch%3A%20%22%2Bg.length%2B%22%20conversations%20%28offset%20%22%2Br%2B%22%29%22%29%2C0%3D%3D%3Dr%26%26g.length%3E0%29%7Bs%28%22API%20fields%3A%20%22%2BObject.keys%28g%5B0%5D%29.join%28%22%2C%20%22%29%29%3Bvar%20f%3Dg%5B0%5D%3Bs%28%22Sample%20model%3A%20%22%2B%28f.default_model_slug%7C%7Cf.model%7C%7Cf.model_slug%7C%7C%22null%22%29%29%2Cs%28%22Sample%20time%3A%20update%3D%22%2Bf.update_time%2B%22%20create%3D%22%2Bf.create_time%29%7Dfor%28var%20h%3D0%3Bh%3Cg.length%3Bh%2B%2B%29%7Bv.push%28g%5Bh%5D%29%3Bvar%20x%3Du%28g%5Bh%5D%29%3Bi%5Bx%5D%3D%28i%5Bx%5D%7C%7C0%29%2B1%7Dvar%20y%3Ddocument.getElementById%28%22g2c-scan-count%22%29%2CC%3Ddocument.getElementById%28%22g2c-scan-status%22%29%3By%26%26%28y.textContent%3Dv.length.toLocaleString%28%29%29%2CC%26%26%28C.innerHTML%3Dg.length%3E%3D100%3F%27%3Cspan%20class%3D%22g2c-scan-dots%22%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%20Still%20scanning%20%E2%80%94%20this%20takes%20a%20minute%2C%20all%20good%27%3A%22Scan%20complete%21%22%29%3Bfor%28var%20T%3D%22%22%2CI%3DObject.keys%28i%29.sort%28function%28e%2Ct%29%7Breturn%20i%5Bt%5D-i%5Be%5D%7D%29%2CB%3D0%3BB%3CI.length%3BB%2B%2B%29T%2B%3D%27%3Cspan%20class%3D%22g2c-scan-tag%22%3E%27%2BI%5BB%5D%2B%22%20%28%22%2Bi%5BI%5BB%5D%5D%2B%22%29%3C%2Fspan%3E%22%3Bvar%20S%3Ddocument.getElementById%28%22g2c-scan-models%22%29%3Bif%28S%26%26%28S.innerHTML%3DT%29%2Cr%2B%3Dg.length%2Cg.length%3C100%29break%3Bawait%20new%20Promise%28function%28e%29%7BsetTimeout%28e%2C500%29%7D%29%7Ds%28%22Total%20conversations%3A%20%22%2Bv.length%29%3Btry%7Bs%28%22Checking%20for%20projects...%22%29%2C%28C%3Ddocument.getElementById%28%22g2c-scan-status%22%29%29%26%26%28C.innerHTML%3D%27%3Cspan%20class%3D%22g2c-scan-dots%22%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%20Checking%20projects%E2%80%A6%27%29%3Bvar%20_%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fprojects%3Foffset%3D0%26limit%3D100%22%2C%7Bcredentials%3A%22include%22%2Cheaders%3Aa%7D%29%3Bif%28200%3D%3D%3D_.status%29%7Bvar%20j%3Dawait%20_.json%28%29%2Cz%3Dj.items%7C%7Cj.projects%7C%7Cj%7C%7C%5B%5D%3Bif%28Array.isArray%28z%29%26%26z.length%3E0%29%7Bs%28%22Found%20%22%2Bz.length%2B%22%20projects%22%29%3Bfor%28var%20L%3D0%3BL%3Cz.length%3BL%2B%2B%29%7Bvar%20M%3Dz%5BL%5D%2CA%3DM.title%7C%7CM.name%7C%7C%22Project%20%22%2B%28L%2B1%29%2CP%3DM.id%7C%7CM.project_id%3Bs%28%22Fetching%20project%3A%20%22%2BA%29%3Bfor%28var%20N%3D0%3B%3B%29%7Bvar%20O%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fconversations%3Fproject_id%3D%22%2BP%2B%22%26offset%3D%22%2BN%2B%22%26limit%3D100%26order%3Dupdated%22%2C%7Bcredentials%3A%22include%22%2Cheaders%3Aa%7D%29%3Bif%28200%21%3D%3DO.status%29break%3Bfor%28var%20D%3D%28await%20O.json%28%29%29.items%7C%7C%5B%5D%2CH%3D0%3BH%3CD.length%3BH%2B%2B%29D%5BH%5D._project%3DA%2CD%5BH%5D._project_id%3DP%2Cv.push%28D%5BH%5D%29%3Bif%28%28y%3Ddocument.getElementById%28%22g2c-scan-count%22%29%29%26%26%28y.textContent%3Dv.length.toLocaleString%28%29%29%2C%28C%3Ddocument.getElementById%28%22g2c-scan-status%22%29%29%26%26%28C.innerHTML%3D%27%3Cspan%20class%3D%22g2c-scan-dots%22%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%20Scanning%20project%3A%20%27%2BA%2B%22%E2%80%A6%22%29%2CN%2B%3DD.length%2CD.length%3C100%29break%3Bawait%20new%20Promise%28function%28e%29%7BsetTimeout%28e%2C500%29%7D%29%7D%7Ds%28%22Total%20with%20projects%3A%20%22%2Bv.length%29%7Delse%20s%28%22No%20projects%20found%22%29%7Delse%20s%28%22Projects%20not%20available%20%28HTTP%20%22%2B_.status%2B%22%29%22%29%7Dcatch%28e%29%7Bs%28%22Projects%20check%20failed%3A%20%22%2Be.message%2B%22%20%28continuing%20without%29%22%29%7Dc%28e%2C%22done%22%2Cv.length%2B%22%20conversations%20found%22%29%3Bvar%20F%2Cq%3Ddocument.getElementById%28%22g2c-scan-hero%22%29%3Bq%26%26q.parentNode.removeChild%28q%29%2C%28F%3Ddocument.getElementById%28%22g2c-progress-fill%22%29%29.classList.remove%28%22indeterminate%22%29%2CF.style.width%3D%220%25%22%2Cdocument.getElementById%28%22g2c-progress%22%29.style.display%3D%22none%22%2Cfunction%28%29%7Bfor%28var%20e%3D%7B%7D%2Ct%3D1%2F0%2Co%3D0%2Ca%3D0%3Ba%3Cv.length%3Ba%2B%2B%29%7Bvar%20r%3Dv%5Ba%5D%2Ci%3Du%28r%29%3Be%5Bi%5D%3D%28e%5Bi%5D%7C%7C0%29%2B1%3Bvar%20c%3Dm%28r%29%3Bc%3E0%26%26c%3Ct%26%26%28t%3Dc%29%2Cc%3E0%26%26c%3Eo%26%26%28o%3Dc%29%7Dvar%20l%3DObject.keys%28e%29.sort%28function%28t%2Cn%29%7Breturn%20e%5Bn%5D-e%5Bt%5D%7D%29%3Bfunction%20g%28e%29%7Bif%28%21e%7C%7Ce%3D%3D%3D1%2F0%29return%22%22%3Bif%28%22string%22%3D%3Dtypeof%20e%29%7Bvar%20t%3Dnew%20Date%28e%29%3Breturn%20isNaN%28t.getTime%28%29%29%3F%22%22%3At.toISOString%28%29.slice%280%2C10%29%7Dt%3Dnew%20Date%28e%3E1e12%3Fe%3A1e3%2Ae%29%3Breturn%20isNaN%28t.getTime%28%29%29%3F%22%22%3At.toISOString%28%29.slice%280%2C10%29%7Dvar%20p%3D%22%22%3Bfor%28a%3D0%3Ba%3Cl.length%3Ba%2B%2B%29%7Bvar%20f%3Dl%5Ba%5D%3Bp%2B%3D%27%3Clabel%20class%3D%22g2c-model-row%22%3E%3Cinput%20type%3D%22checkbox%22%20checked%20data-model%3D%22%27%2Bf%2B%27%22%3E%20%27%2Bf%2B%27%3Cspan%20class%3D%22cnt%22%3E%27%2Be%5Bf%5D%2B%22%3C%2Fspan%3E%3C%2Flabel%3E%22%7Dvar%20h%3D%27%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-panel%22%20id%3D%22g2c-filter-panel%22%3E%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22text-align%3Acenter%3Bmargin-bottom%3A14px%3B%22%3E%3Cspan%20style%3D%22font-size%3A28px%3Bfont-weight%3A800%3Bcolor%3A%237eb8a0%3B%22%3E%27%2Bv.length.toLocaleString%28%29%2B%27%3C%2Fspan%3E%3Cspan%20style%3D%22font-size%3A12px%3Bcolor%3A%23888%3B%22%3E%20conversations%20scanned%3C%2Fspan%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-section%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-label%22%3EModels%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-models%22%20id%3D%22g2c-filter-models%22%3E%27%2Bp%2B%27%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-select-btns%22%3E%3Cbutton%20id%3D%22g2c-sel-all%22%3ESelect%20all%3C%2Fbutton%3E%20%C2%B7%20%3Cbutton%20id%3D%22g2c-sel-none%22%3ESelect%20none%3C%2Fbutton%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-section%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-label%22%3EDate%20range%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-row%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22date%22%20class%3D%22g2c-filter-input%22%20id%3D%22g2c-date-from%22%20value%3D%22%27%2Bg%28t%29%2B%27%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%23555%3B%22%3E%E2%86%92%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22date%22%20class%3D%22g2c-filter-input%22%20id%3D%22g2c-date-to%22%20value%3D%22%27%2Bg%28o%29%2B%27%22%3E%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-section%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-label%22%3EMax%20conversations%20%280%20%3D%20all%29%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22number%22%20class%3D%22g2c-filter-input%22%20id%3D%22g2c-limit%22%20value%3D%220%22%20min%3D%220%22%20style%3D%22width%3A100%25%3B%22%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-section%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-label%22%3EIncremental%20export%20%28skip%20already%20exported%29%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-drop%22%20id%3D%22g2c-prev-drop%22%3EDrop%20or%20click%20to%20load%20previous%20export%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22file%22%20id%3D%22g2c-prev-file%22%20accept%3D%22.json%22%20style%3D%22display%3Anone%3B%22%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-filter-summary%22%20id%3D%22g2c-filter-summary%22%3E%27%2Bv.length%2B%27%20conversations%20selected%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22g2c-btn%22%20id%3D%22g2c-btn-download%22%20style%3D%22border-color%3A%23d4a574%3Bmargin-bottom%3A0%3B%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-icon%22%3E%F0%9F%93%A5%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-text%22%3E%3Cspan%20style%3D%22color%3A%23d4a574%3B%22%3EDownload%20%27%2Bv.length%2B%27%20conversations%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-btn-sub%22%3E~%27%2Bb%28v.length%29%2B%22%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%20%20%20%20%20%20%3C%2Fdiv%3E%22%2Cx%3Dn.querySelector%28%22.g2c-body%22%29%3Bif%28%21x%29return%20void%20s%28%22Warning%3A%20panel%20body%20not%20found%22%2C%22error%22%29%3Bvar%20y%3Ddocument.getElementById%28%22g2c-progress%22%29%2CC%3Ddocument.createElement%28%22div%22%29%3BC.innerHTML%3Dh%3Bvar%20T%3DC.firstElementChild%7C%7CC.firstChild%3By%26%26y.parentNode%3Fy.parentNode.insertBefore%28T%2Cy%29%3Ax.appendChild%28T%29%3Bfor%28var%20I%3D%5B%22g2c-btn-memory%22%2C%22g2c-btn-convos%22%2C%22g2c-btn-instructions%22%2C%22g2c-btn-all%22%5D%2CB%3D0%3BB%3CI.length%3BB%2B%2B%29%7Bvar%20S%3Ddocument.getElementById%28I%5BB%5D%29%3BS%26%26%28S.style.display%3D%22none%22%29%7Dd%28%22g2c-sel-all%22%2C%22click%22%2Cfunction%28%29%7Bfor%28var%20e%3Ddocument.querySelectorAll%28%22%23g2c-filter-models%20input%22%29%2Ct%3D0%3Bt%3Ce.length%3Bt%2B%2B%29e%5Bt%5D.checked%3D%210%3Bw%28%29%7D%29%2Cd%28%22g2c-sel-none%22%2C%22click%22%2Cfunction%28%29%7Bfor%28var%20e%3Ddocument.querySelectorAll%28%22%23g2c-filter-models%20input%22%29%2Ct%3D0%3Bt%3Ce.length%3Bt%2B%2B%29e%5Bt%5D.checked%3D%211%3Bw%28%29%7D%29%2Cd%28%22g2c-prev-drop%22%2C%22click%22%2Cfunction%28%29%7Bvar%20e%3Ddocument.getElementById%28%22g2c-prev-file%22%29%3Be%26%26e.click%28%29%7D%29%3Bfor%28var%20_%3Ddocument.querySelectorAll%28%22%23g2c-filter-models%20input%2C%20%23g2c-date-from%2C%20%23g2c-date-to%2C%20%23g2c-limit%22%29%2Cj%3D0%3Bj%3C_.length%3Bj%2B%2B%29_%5Bj%5D.addEventListener%28%22change%22%2Cw%29%3Bd%28%22g2c-prev-file%22%2C%22change%22%2Cfunction%28%29%7Bthis.files.length%26%26k%28this.files%5B0%5D%29%7D%29%3Bvar%20z%3Ddocument.getElementById%28%22g2c-prev-drop%22%29%3Bz%26%26%28z.addEventListener%28%22dragover%22%2Cfunction%28e%29%7Be.preventDefault%28%29%2Cthis.style.borderColor%3D%22%23d4a574%22%7D%29%2Cz.addEventListener%28%22dragleave%22%2Cfunction%28%29%7Bthis.style.borderColor%3D%22%22%7D%29%2Cz.addEventListener%28%22drop%22%2Cfunction%28e%29%7Be.preventDefault%28%29%2Cthis.style.borderColor%3D%22%22%2Ce.dataTransfer.files.length%26%26k%28e.dataTransfer.files%5B0%5D%29%7D%29%29%3Bd%28%22g2c-btn-download%22%2C%22click%22%2CE%29%3Bfor%28var%20L%3Ddocument.querySelectorAll%28%22%23g2c-filter-models%20input%22%29%2CM%3D0%3BM%3CL.length%3BM%2B%2B%29L%5BM%5D.checked%3D%210%3Bw%28%29%7D%28%29%7Dcatch%28t%29%7Bs%28%22Scan%20failed%3A%20%22%2Bt.message%2C%22error%22%29%2Cc%28e%2C%22error%22%2Ct.message%29%7D%7Dfunction%20b%28e%29%7Bvar%20t%3D1.5%2Ae%3Bif%28t%3C60%29return%22~%22%2BMath.round%28t%29%2B%22%20seconds%22%3Bvar%20n%3DMath.round%28t%2F60%29%3Breturn%20n%3C60%3F%22~%22%2Bn%2B%22%20minutes%22%3A%22~%22%2B%28t%2F3600%29.toFixed%281%29%2B%22%20hours%22%7Dfunction%20y%28%29%7Btry%7Bfor%28var%20e%3D%7B%7D%2Ct%3Ddocument.querySelectorAll%28%22%23g2c-filter-models%20input%22%29%2Cn%3D0%3Bn%3Ct.length%3Bn%2B%2B%29t%5Bn%5D.checked%26%26%28e%5Bt%5Bn%5D.getAttribute%28%22data-model%22%29%5D%3D%210%29%3Bvar%20o%3DObject.keys%28e%29.length%3E0%2Ca%3Ddocument.getElementById%28%22g2c-date-from%22%29%2Cr%3Ddocument.getElementById%28%22g2c-date-to%22%29%2Ci%3Ddocument.getElementById%28%22g2c-limit%22%29%2Cc%3Da%3Fa.value%3A%22%22%2Cl%3Dr%3Fr.value%3A%22%22%2Cd%3Dc%3Fnew%20Date%28c%2B%22T00%3A00%3A00%22%29.getTime%28%29%2F1e3%3A0%2Cg%3Dl%3Fnew%20Date%28l%2B%22T23%3A59%3A59%22%29.getTime%28%29%2F1e3%3A1%2F0%2Cp%3Di%26%26parseInt%28i.value%29%7C%7C0%2Cf%3D%5B%5D%3Bfor%28n%3D0%3Bn%3Cv.length%3Bn%2B%2B%29%7Bvar%20x%3Dv%5Bn%5D%2Cb%3Du%28x%29%3Bif%28%21o%7C%7Ce%5Bb%5D%29%7Bvar%20y%3Dm%28x%29%3Bif%28%21%28y%3E0%26%26%28y%3Cd%7C%7Cy%3Eg%29%29%26%26%21h%5Bx.id%5D%26%26%28f.push%28x%29%2Cp%3E0%26%26f.length%3E%3Dp%29%29break%7D%7Dreturn%20f%7Dcatch%28e%29%7Breturn%20s%28%22Filter%20error%3A%20%22%2Be.message%2C%22error%22%29%2Cv%7D%7Dfunction%20w%28%29%7Bvar%20e%3Dy%28%29%2Ct%3Ddocument.getElementById%28%22g2c-filter-summary%22%29%2Cn%3Ddocument.getElementById%28%22g2c-btn-download%22%29%2Co%3DObject.keys%28h%29.length%2Ca%3De.length%2B%22%20conversations%20selected%22%3Bif%28o%3E0%26%26%28a%2B%3D%22%20%28%22%2Bo%2B%22%20skipped%20from%20previous%20export%29%22%29%2Ct%26%26%28t.textContent%3Da%29%2Cn%29%7Bvar%20r%3Dn.querySelector%28%22.g2c-btn-text%20span%22%29%3Br%26%26%28r.textContent%3D%22Download%20%22%2Be.length%2B%22%20conversations%22%29%3Bvar%20i%3Dn.querySelector%28%22.g2c-btn-sub%22%29%3Bi%26%26%28i.textContent%3Db%28e.length%29%29%7D%7Dfunction%20k%28e%29%7Bvar%20t%3Ddocument.getElementById%28%22g2c-prev-drop%22%29%3Bt%26%26%28t.textContent%3D%22Loading%20%22%2Be.name%2B%22...%22%29%3Bvar%20n%3Dnew%20FileReader%3Bn.onload%3Dfunction%28e%29%7Btry%7Bvar%20n%3DJSON.parse%28e.target.result%29%2Co%3Dn.conversations%7C%7Cn%7C%7C%5B%5D%3Bif%28Array.isArray%28o%29%29%7Bh%3D%7B%7D%3Bfor%28var%20a%3D0%3Ba%3Co.length%3Ba%2B%2B%29o%5Ba%5D.id%26%26%28h%5Bo%5Ba%5D.id%5D%3D%210%29%3Bt%26%26%28t.textContent%3D%22%E2%9C%85%20%22%2BObject.keys%28h%29.length%2B%22%20conversations%20from%20previous%20export%22%2Ct.className%3D%22g2c-filter-drop%20active%22%29%2Cs%28%22Loaded%20previous%20export%3A%20%22%2BObject.keys%28h%29.length%2B%22%20conversation%20IDs%22%29%2Cw%28%29%7D%7Dcatch%28e%29%7Bt%26%26%28t.textContent%3D%22%E2%9D%8C%20Could%20not%20parse%20file%22%29%2Cs%28%22Previous%20export%20error%3A%20%22%2Be.message%2C%22error%22%29%7D%7D%2Cn.readAsText%28e%29%7Dasync%20function%20E%28%29%7Bvar%20e%3Dy%28%29%3Bif%280%21%3D%3De.length%29%7B%28J%3Ddocument.getElementById%28%22g2c-filter-panel%22%29%29%26%26%28J.innerHTML%3D%27%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-dl-hero%22%20id%3D%22g2c-dl-hero%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22g2c-dl-count%22%20id%3D%22g2c-dl-count%22%3E0%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22g2c-dl-of%22%20id%3D%22g2c-dl-of%22%3E%20%2F%20%27%2Be.length%2B%27%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-dl-title%22%20id%3D%22g2c-dl-title%22%3EStarting%20download%E2%80%A6%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22margin%3A10px%200%3B%22%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-progress-bar%22%3E%3Cdiv%20class%3D%22g2c-progress-fill%22%20id%3D%22g2c-dl-fill%22%20style%3D%22width%3A0%25%3B%22%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-dl-pct%22%20id%3D%22g2c-dl-pct%22%3E0%25%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-dl-remaining%22%20id%3D%22g2c-dl-remaining%22%3E%3C%2Fdiv%3E%27%29%3Bvar%20t%3DDate.now%28%29%3Btry%7Bfor%28var%20n%3D%7BAuthorization%3A%22Bearer%20%22%2Bawait%20p%28%29%7D%2Co%3D%7Bexport_date%3A%28new%20Date%29.toISOString%28%29%2Ctool%3A%22GPT2Claude%20Migration%20Kit%20v2.2%22%2Cformat_version%3A3%2Ctotal_conversations%3Ae.length%2Cconversations%3A%5B%5D%7D%2Ca%3D0%2Cr%3D0%2Ci%3D0%3Bi%3Ce.length%3Bi%2B%2B%29%7Bvar%20c%3De%5Bi%5D%2Cd%3Dc.title%7C%7C%22Untitled%22%2Cg%3DMath.round%28%28i%2B1%29%2Fe.length%2A100%29%2Cu%3Di%2B1%2Cm%3De.length-u%2Cf%3Ddocument.getElementById%28%22g2c-dl-count%22%29%2Cv%3Ddocument.getElementById%28%22g2c-dl-title%22%29%2Ch%3Ddocument.getElementById%28%22g2c-dl-fill%22%29%2Cx%3Ddocument.getElementById%28%22g2c-dl-pct%22%29%2Cb%3Ddocument.getElementById%28%22g2c-dl-remaining%22%29%3Bif%28f%26%26%28f.textContent%3Du%29%2Cv%26%26%28v.textContent%3Dd%29%2Ch%26%26%28h.style.width%3Dg%2B%22%25%22%29%2Cx%26%26%28x.textContent%3Dg%2B%22%25%22%29%2Cb%26%26i%3E0%29%7Bvar%20w%3D%28Date.now%28%29-t%29%2F1e3%2Fu%2Ck%3DMath.round%28w%2Am%29%3Bb.textContent%3Dk%3C60%3F%22~%22%2Bk%2B%22%20seconds%20remaining%22%3A%22~%22%2BMath.round%28k%2F60%29%2B%22%20minutes%20remaining%22%7Dtry%7Bvar%20E%3Dawait%20fetch%28%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fconversation%2F%22%2Bc.id%2C%7Bcredentials%3A%22include%22%2Cheaders%3An%7D%29%3Bif%28429%3D%3D%3DE.status%29%7Bs%28%22Rate%20limited%2C%20waiting%2030s...%22%2C%22error%22%29%2Cv%26%26%28v.textContent%3D%22Rate%20limited%20%E2%80%94%20waiting%2030s%E2%80%A6%22%29%2Cb%26%26%28b.textContent%3D%22Will%20resume%20automatically%22%29%2Cawait%20new%20Promise%28function%28e%29%7BsetTimeout%28e%2C3e4%29%7D%29%2Ci--%3Bcontinue%7Dif%28200%21%3D%3DE.status%29%7Bs%28%22Skipped%3A%20%22%2Bd%2B%22%20%28HTTP%20%22%2BE.status%2B%22%29%22%2C%22error%22%29%2Cr%2B%2B%2Co.conversations.push%28%7Bid%3Ac.id%2Ctitle%3Ad%2Cerror%3A%22HTTP%20%22%2BE.status%7D%29%3Bcontinue%7Dvar%20C%3Dawait%20E.json%28%29%2CT%3D%5B%5D%2CI%3D%211%3Bif%28C.mapping%29%7Bfor%28var%20B%3DObject.keys%28C.mapping%29%2CS%3Dnull%2C_%3D0%3B_%3CB.length%3B_%2B%2B%29if%28%21C.mapping%5BB%5B_%5D%5D.parent%29%7BS%3DB%5B_%5D%3Bbreak%7Dfunction%20j%28e%29%7Bif%28%21e%7C%7C%21e.message%7C%7C%21e.message.content%29return%22%22%3Bvar%20t%3De.message.content.parts%3Bif%28%21Array.isArray%28t%29%29return%20JSON.stringify%28e.message.content%29%3Bfor%28var%20n%3D%5B%5D%2Co%3D0%3Bo%3Ct.length%3Bo%2B%2B%29if%28%22string%22%3D%3Dtypeof%20t%5Bo%5D%29n.push%28t%5Bo%5D%29%3Belse%20if%28t%5Bo%5D%26%26%22object%22%3D%3Dtypeof%20t%5Bo%5D%26%26%28%22image_asset_pointer%22%3D%3D%3Dt%5Bo%5D.content_type%7C%7Ct%5Bo%5D.asset_pointer%29%29%7Bvar%20a%3Dt%5Bo%5D.metadata%26%26t%5Bo%5D.metadata.dalle%26%26t%5Bo%5D.metadata.dalle.prompt%3F%22DALL-E%3A%20%22%2Bt%5Bo%5D.metadata.dalle.prompt%3A%22image%22%3Bn.push%28%22%5B%F0%9F%96%BC%20%22%2Ba%2B%22%5D%22%29%7Dreturn%20n.join%28%22%5Cn%22%29%7Dfunction%20z%28e%29%7Breturn%20e.message%26%26e.message.author%26%26e.message.author.role%7C%7C%22unknown%22%7Dfunction%20L%28e%29%7Breturn%20e.message%26%26e.message.metadata%26%26e.message.metadata.model_slug%7C%7Cnull%7Dfunction%20M%28e%29%7Breturn%20e.message%26%26e.message.create_time%7C%7Cnull%7DS%7C%7C%28S%3DB%5B0%5D%29%3Bfor%28var%20A%3DS%2CP%3D%7B%7D%2CN%3D0%3BA%26%26N%3C5e4%26%26%28N%2B%2B%2C%21P%5BA%5D%29%3B%29%7BP%5BA%5D%3D%210%3Bvar%20O%3DC.mapping%5BA%5D%3Bif%28%21O%29break%3Bif%28O.message%26%26O.message.content%29%7Bvar%20D%3Dj%28O%29%3Bif%28%22%22%21%3D%3DD.trim%28%29%29%7Bvar%20H%3D%7Brole%3Az%28O%29%2Ccontent%3AD%2Ctimestamp%3AM%28O%29%2Cmodel%3AL%28O%29%7D%3Bif%28O.parent%26%26C.mapping%5BO.parent%5D%29%7Bvar%20F%3DC.mapping%5BO.parent%5D%3Bif%28F.children%26%26F.children.length%3E1%29%7Bfor%28var%20q%3D%5B%5D%2CG%3D0%3BG%3CF.children.length%3BG%2B%2B%29%7Bvar%20R%3DF.children%5BG%5D%3Bif%28R%21%3D%3DA%29%7Bvar%20Y%3DC.mapping%5BR%5D%3Bif%28Y%26%26Y.message%26%26Y.message.content%29%7Bvar%20K%3Dj%28Y%29%3BK.trim%28%29%26%26q.push%28%7Bcontent%3AK%2Crole%3Az%28Y%29%2Ctimestamp%3AM%28Y%29%2Cmodel%3AL%28Y%29%7D%29%7D%7D%7Dq.length%3E0%26%26%28H.alternatives%3Dq%2CI%3D%210%29%7D%7DT.push%28H%29%7D%7Dif%28%21%28O.children%26%26O.children.length%3E0%29%29break%3BA%3DO.children%5BO.children.length-1%5D%7D%7Do.conversations.push%28%7Bid%3Ac.id%2Ctitle%3Ad%2Ccreate_time%3Ac.create_time%2Cupdate_time%3Ac.update_time%2Cmodel%3AC.default_model_slug%7C%7CC.model%7C%7Cnull%2Cproject%3Ac._project%7C%7Cnull%2Cproject_id%3Ac._project_id%7C%7Cnull%2Chas_branches%3AI%2Cmessage_count%3AT.length%2Cmessages%3AT%7D%29%2Ca%2B%2B%2Ci%2525%3D%3D0%26%26i%3E0%26%26s%28%22Progress%3A%20%22%2B%28i%2B1%29%2B%22%2F%22%2Be.length%29%7Dcatch%28W%29%7Bs%28%22Error%3A%20%22%2Bd%2B%22%20%E2%80%94%20%22%2BW.message%2C%22error%22%29%2Cr%2B%2B%2Co.conversations.push%28%7Bid%3Ac.id%2Ctitle%3Ad%2Cerror%3AW.message%7D%29%2C%28v%3Ddocument.getElementById%28%22g2c-dl-title%22%29%29%26%26%28v.textContent%3D%22Error%3A%20%22%2BW.message%29%7Dawait%20new%20Promise%28function%28e%29%7BsetTimeout%28e%2C1e3%29%7D%29%7Dvar%20J%2CU%3DJSON.stringify%28o%2Cnull%2C2%29%2CX%3D%28U.length%2F1024%2F1024%29.toFixed%281%29%3Bl%28U%2C%22chatgpt_all_conversations.json%22%2C%22application%2Fjson%22%29%2Cs%28%22DONE%21%20%22%2Ba%2B%22%20conversations%2C%20%22%2Br%2B%22%20errors%2C%20~%22%2BX%2B%22%20MB%22%2C%22success%22%29%2C%28J%3Ddocument.getElementById%28%22g2c-filter-panel%22%29%29%26%26%28J.innerHTML%3D%27%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-complete%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-complete-icon%22%3E%E2%9C%85%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-complete-title%22%3EExport%20Complete%21%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-complete-sub%22%3E%27%2Ba%2B%22%20conversations%20%C2%B7%20%22%2BX%2B%27%20MB%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-whatsnext%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-whatsnext-title%22%3EWhat%E2%80%99s%20next%3F%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-whatsnext-item%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%23a0a0e0%3B%22%3E%F0%9F%91%80%20Browse%20your%20data%3C%2Fspan%3E%3Cbr%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%23999%3B%22%3EOpen%20the%20%3Ca%20href%3D%22https%3A%2F%2Fsiamsnus.github.io%2FGPT2Claude-Migration-Kit%2Fviewer.html%22%20target%3D%22_blank%22%3EConversation%20Viewer%3C%2Fa%3E%20to%20explore%20your%20chats.%20You%20can%20%3Ca%20href%3D%22https%3A%2F%2Fsiamsnus.github.io%2FGPT2Claude-Migration-Kit%2Fviewer.html%22%20download%20target%3D%22_blank%22%3Edownload%20it%3C%2Fa%3E%20for%20fully%20offline%20use.%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22g2c-whatsnext-item%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%237eb8a0%3B%22%3E%F0%9F%9A%80%20Import%20to%20Claude%3C%2Fspan%3E%20%3Cspan%20class%3D%22g2c-whatsnext-badge%22%3Erecommended%3C%2Fspan%3E%3Cbr%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20style%3D%22color%3A%23999%3B%22%3EFollow%20the%20%3Ca%20href%3D%22https%3A%2F%2Fsiamsnus.github.io%2FGPT2Claude-Migration-Kit%2F%23importing%22%20target%3D%22_blank%22%3Eimport%20guide%3C%2Fa%3E%20to%20bring%20your%20history%20into%20Claude.%3C%2Fspan%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%27%29%7Dcatch%28V%29%7Bs%28%22Download%20failed%3A%20%22%2BV.message%2C%22error%22%29%2C%28v%3Ddocument.getElementById%28%22g2c-dl-title%22%29%29%26%26%28v.textContent%3D%22Error%3A%20%22%2BV.message%29%7D%7Delse%20alert%28%22No%20conversations%20selected.%20Adjust%20your%20filters.%22%29%7Dasync%20function%20C%28%29%7Bvar%20e%3Ddocument.getElementById%28%22g2c-btn-instructions%22%29%3Bc%28e%2C%22running%22%2C%22Exporting...%22%29%3Btry%7Bfor%28var%20t%3D%7BAuthorization%3A%22Bearer%20%22%2Bawait%20p%28%29%7D%2Cn%3D%5B%7Bname%3A%22custom_instructions%22%2Curl%3A%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fuser_system_messages%22%7D%2C%7Bname%3A%22settings%22%2Curl%3A%22https%3A%2F%2Fchatgpt.com%2Fbackend-api%2Fsettings%22%7D%5D%2Co%3D%7Bexport_date%3A%28new%20Date%29.toISOString%28%29%2Ctool%3A%22GPT2Claude%20Migration%20Kit%20v2.2%22%2Cdata%3A%7B%7D%7D%2Ca%3D0%3Ba%3Cn.length%3Ba%2B%2B%29%7Bvar%20r%3Dn%5Ba%5D%3Bs%28%22Fetching%20%22%2Br.name%2B%22...%22%29%3Btry%7Bvar%20i%3Dawait%20fetch%28r.url%2C%7Bcredentials%3A%22include%22%2Cheaders%3At%7D%29%3B200%3D%3D%3Di.status%3F%28o.data%5Br.name%5D%3Dawait%20i.json%28%29%2Cs%28%22Got%3A%20%22%2Br.name%29%29%3A404%3D%3D%3Di.status%3F%28o.data%5Br.name%5D%3D%7Bnote%3A%22Not%20available%20on%20this%20account%22%7D%2Cs%28r.name%2B%22%3A%20not%20available%20%28skipped%29%22%29%29%3A%28o.data%5Br.name%5D%3D%7Berror%3A%22HTTP%20%22%2Bi.status%7D%2Cs%28r.name%2B%22%3A%20HTTP%20%22%2Bi.status%2C%22error%22%29%29%7Dcatch%28e%29%7Bo.data%5Br.name%5D%3D%7Berror%3Ae.message%7D%2Cs%28r.name%2B%22%20error%3A%20%22%2Be.message%2C%22error%22%29%7D%7Dl%28JSON.stringify%28o%2Cnull%2C2%29%2C%22chatgpt_instructions.json%22%2C%22application%2Fjson%22%29%2Cc%28e%2C%22done%22%2C%22Instructions%20exported%22%29%7Dcatch%28t%29%7Bs%28%22Instructions%20export%20failed%3A%20%22%2Bt.message%2C%22error%22%29%2Cc%28e%2C%22error%22%2Ct.message%29%7D%7Dfunction%20T%28e%2Ct%29%7Bvar%20n%3Ddocument.createElement%28%22textarea%22%29%3Bn.value%3De%2Cn.style.position%3D%22fixed%22%2Cn.style.left%3D%22-9999px%22%2Cdocument.body.appendChild%28n%29%2Cn.select%28%29%3Btry%7Bdocument.execCommand%28%22copy%22%29%2Ct.textContent%3D%22%E2%9C%85%20Copied%21%22%2CsetTimeout%28function%28%29%7Bt.textContent%3D%22Copy%20log%22%7D%2C2e3%29%7Dcatch%28e%29%7Bt.textContent%3D%22Copy%20failed%22%2CsetTimeout%28function%28%29%7Bt.textContent%3D%22Copy%20log%22%7D%2C2e3%29%7Ddocument.body.removeChild%28n%29%7Ddocument.getElementById%28%22g2c-close%22%29.addEventListener%28%22click%22%2Cfunction%28%29%7Bn.style.animation%3D%22g2c-fadein%200.2s%20ease-out%20reverse%22%2CsetTimeout%28function%28%29%7Bn.remove%28%29%2Ct.remove%28%29%7D%2C200%29%7D%29%2Cdocument.getElementById%28%22g2c-btn-memory%22%29.addEventListener%28%22click%22%2Cf%29%2Cdocument.getElementById%28%22g2c-btn-convos%22%29.addEventListener%28%22click%22%2Cx%29%2Cdocument.getElementById%28%22g2c-btn-instructions%22%29.addEventListener%28%22click%22%2CC%29%2Cdocument.getElementById%28%22g2c-btn-all%22%29.addEventListener%28%22click%22%2Casync%20function%28%29%7Bc%28document.getElementById%28%22g2c-btn-all%22%29%2C%22running%22%2C%22Exporting%20everything...%22%29%2Cs%28%22---%20EXPORT%20ALL%20started%20---%22%29%2Cawait%20f%28%29%2Cawait%20C%28%29%2Cs%28%22Memories%20%26%20instructions%20done.%20Scanning%20conversations...%22%29%2Cawait%20x%28%29%2Cs%28%22Memories%20%26%20instructions%20exported.%20Configure%20conversation%20filters%20and%20click%20Download.%22%2C%22success%22%29%7D%29%2Cdocument.getElementById%28%22g2c-toggle-log%22%29.addEventListener%28%22click%22%2Cfunction%28%29%7Bvar%20e%3Di.classList.contains%28%22visible%22%29%3Bi.classList.toggle%28%22visible%22%29%2Cthis.textContent%3De%3F%22Show%20log%20%E2%96%BC%22%3A%22Hide%20log%20%E2%96%B2%22%7D%29%2Cdocument.getElementById%28%22g2c-copy-log%22%29.addEventListener%28%22click%22%2Cfunction%28%29%7Bfor%28var%20e%3Dthis%2Ct%3Ddocument.querySelectorAll%28%22.g2c-log-entry%22%29%2Cn%3D%22%22%2Co%3D0%3Bo%3Ct.length%3Bo%2B%2B%29n%2B%3Dt%5Bo%5D.textContent%2B%22%5Cn%22%3Bnavigator.clipboard%26%26navigator.clipboard.writeText%3Fnavigator.clipboard.writeText%28n%29.then%28function%28%29%7Be.textContent%3D%22%E2%9C%85%20Copied%21%22%2CsetTimeout%28function%28%29%7Be.textContent%3D%22Copy%20log%22%7D%2C2e3%29%7D%29.catch%28function%28%29%7BT%28n%2Ce%29%7D%29%3AT%28n%2Ce%29%7D%29%2Cs%28%22Ready.%20Click%20a%20button%20to%20start%20exporting.%22%29%7D%28%29%3B"
           onclick="event.preventDefault();alert('Don\'t click — drag this button up to your bookmark bar!');">
          📦 GPT→Claude Export
        </a>
        <p class="drag-hint"><strong>Drag</strong> the button above to your bookmark bar.<br>No bookmark bar? Press <strong>Ctrl+Shift+B</strong></p>
      </div>
      <div class="install-steps">
        <div class="install-step"><div class="install-step-num">1</div><p>Drag the gold button above into your <strong>bookmark bar</strong></p></div>
        <div class="install-step"><div class="install-step-num">2</div><p>Go to <a href="https://chatgpt.com" target="_blank" style="color:var(--accent);text-decoration:none;font-weight:600;">chatgpt.com</a> and make sure you're logged in</p></div>
        <div class="install-step"><div class="install-step-num">3</div><p>Click the <strong>GPT→Claude Export</strong> bookmark — a panel appears on the page</p></div>
        <div class="install-step"><div class="install-step-num">4</div><p>Click the export buttons. Files download to your computer automatically.</p></div>
      </div>
    </div>

    <!-- FIREFOX TAB -->
    <div class="tab-content" id="tab-firefox">
      <div class="install-steps">
        <div class="install-step"><div class="install-step-num">1</div>
          <div>
            <p>Right-click your <strong>bookmark bar</strong> → click <strong>"Add Bookmark..."</strong></p>
            <p style="font-size:0.8rem; color:#555; margin-top:0.25rem;">No bookmark bar? Press Ctrl+Shift+B to show it</p>
          </div>
        </div>
        <div class="install-step"><div class="install-step-num">2</div>
          <div>
            <p>Set the <strong>Name</strong> to: <strong style="color:var(--accent);">GPT→Claude Export</strong></p>
          </div>
        </div>
        <div class="install-step"><div class="install-step-num">3</div>
          <div>
            <p>Click the button below to copy the bookmark URL:</p>
            <button class="action-btn" id="copy-bookmark-url" style="margin-top:0.5rem;">📋 Copy bookmark URL</button>
            <p class="copy-confirm" id="copy-url-confirm">✅ Copied! Now paste it into the URL field.</p>
          </div>
        </div>
        <div class="install-step"><div class="install-step-num">4</div>
          <div>
            <p>Paste (<strong>Ctrl+V</strong>) into the <strong>Location (URL)</strong> field → click <strong>Save</strong></p>
          </div>
        </div>
        <div class="install-step"><div class="install-step-num">5</div>
          <div>
            <p>Go to <a href="https://chatgpt.com" target="_blank" style="color:var(--accent);text-decoration:none;font-weight:600;">chatgpt.com</a>, log in, click your new bookmark. The export panel appears!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ANY BROWSER / PASTE TAB -->
    <div class="tab-content" id="tab-paste">
      <div class="install-steps">
        <div class="install-step"><div class="install-step-num">1</div><p>Go to <a href="https://chatgpt.com" target="_blank" style="color:var(--accent);text-decoration:none;font-weight:600;">chatgpt.com</a> and log in</p></div>
        <div class="install-step"><div class="install-step-num">2</div><p>Press <strong>F12</strong> on your keyboard → click the <strong>Console</strong> tab</p></div>
        <div class="install-step"><div class="install-step-num">3</div>
          <div>
            <p>Click the button below to copy the export script:</p>
            <button class="action-btn" id="copy-full-script" style="margin-top:0.5rem;">📋 Copy export script</button>
            <p class="copy-confirm" id="copy-script-confirm">✅ Copied! Now paste into the console.</p>
          </div>
        </div>
        <div class="install-step"><div class="install-step-num">4</div><p>Click inside the console, press <strong>Ctrl+V</strong> to paste, then press <strong>Enter</strong></p></div>
        <div class="install-step"><div class="install-step-num">5</div><p>The export panel appears on the ChatGPT page. Click the buttons to export.</p></div>
      </div>
      <p style="font-size:0.8rem; color:#555; margin-top:1rem;">Firefox users: if you see a warning about pasting, type <strong>allow pasting</strong> and press Enter first.</p>
    </div>
  </div>

  <!-- ========== HOW TO USE ========== -->
  <div class="steps">
    <h2>What happens when you run it</h2>
    <div class="step-list">
      <div class="step-item">
        <div class="step-num s1">1</div>
        <div class="step-text"><h3>A floating panel appears</h3><p>Dark panel on the right side of the ChatGPT page with three export buttons. You can drag it around.</p></div>
      </div>
      <div class="step-item">
        <div class="step-num s2">2</div>
        <div class="step-text"><h3>Click each button to export</h3><p>Memories, conversations, and instructions. Each one downloads a file automatically. Conversations show a progress bar.</p></div>
      </div>
      <div class="step-item">
        <div class="step-num s3">3</div>
        <div class="step-text"><h3>Upload to Claude</h3><p>Go to <a href="https://claude.ai" style="color:var(--accent)">claude.ai</a> (or the desktop app: <strong>+</strong> → <strong>Add files</strong>) and upload the downloaded files.</p></div>
      </div>
    </div>
  </div>

  <!-- ========== WHAT YOU GET ========== -->
  <div class="exports-section">
    <h2>What you get</h2>
    <div class="export-grid">
      <div class="export-card">
        <div class="icon">🧠</div>
        <h3>Memories</h3>
        <p>Every fact ChatGPT memorized about you.</p>
        <span class="filename">chatgpt_memories.md</span>
      </div>
      <div class="export-card">
        <div class="icon">💬</div>
        <h3>Conversations</h3>
        <p>Every chat with full history, timestamps, model info.</p>
        <span class="filename">chatgpt_all_conversations.json</span>
      </div>
      <div class="export-card">
        <div class="icon">⚙️</div>
        <h3>Instructions</h3>
        <p>Custom instructions and settings.</p>
        <span class="filename">chatgpt_instructions.json</span>
      </div>
    </div>
  </div>

  <!-- ========== IMPORTING TO CLAUDE ========== -->
  <div class="exports-section" id="importing">
    <h2>Importing to Claude</h2>
    <div class="step-list">
      <div class="step-item">
        <div class="step-num s1">1</div>
        <div class="step-text">
          <h3>Upload memories first</h3>
          <p>Upload <strong>chatgpt_memories.md</strong> with this prompt:</p>
          <p style="color:var(--accent); margin-top:0.5rem; font-style:italic;">"I just migrated from ChatGPT. This file contains all the facts and memories ChatGPT had stored about me. Please read through every item carefully and remember all of these facts about me. Confirm what you've learned and note if anything seems contradictory or outdated."</p>
        </div>
      </div>
      <div class="step-item">
        <div class="step-num s2">2</div>
        <div class="step-text">
          <h3>Upload conversations</h3>
          <p>Upload <strong>chatgpt_all_conversations.json</strong> (zip it if large) with this prompt:</p>
          <p style="color:var(--accent); margin-top:0.5rem; font-style:italic;">"This is my complete ChatGPT conversation history. Please analyze it and create a structured summary: (1) Key ongoing projects, (2) Important decisions, (3) Personal context and preferences, (4) Anything unfinished I should pick up."</p>
        </div>
      </div>
      <div class="step-item">
        <div class="step-num s3">3</div>
        <div class="step-text">
          <h3>Upload instructions</h3>
          <p>Upload <strong>chatgpt_instructions.json</strong> with this prompt:</p>
          <p style="color:var(--accent); margin-top:0.5rem; font-style:italic;">"These are my custom instructions from ChatGPT. Please adapt your communication style to match my preferences."</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== WHAT TO EXPECT ========== -->
  <div class="exports-section" id="expectations">
    <h2>What to expect after migrating</h2>
    <div class="fallback-box">
      <h3>Claude remembers the facts, but needs time to know <em>you</em></h3>
      <p>Think of it like switching doctors. The new doctor has your complete file but doesn't <em>know</em> you yet. Claude gets roughly <strong>70%</strong> from the import. The rest — your humor, style, priorities — builds naturally over a couple of weeks.</p>
      <p style="margin-bottom:0;"><strong>The upside:</strong> Claude calibrates to who you are <em>now</em>, not who you were two years ago.</p>
    </div>
    <div class="fallback-box">
      <h3>Example conversations after import</h3>
      <p style="color:var(--text);"><strong>You:</strong> "Remember that sourdough recipe we worked on?"</p>
      <p style="color:var(--accent)"><strong>Claude:</strong> "Yes — 78% hydration, overnight cold proof. You said the crust was perfect but crumb too dense. We were going to try autolyse. Want to tweak it?"</p>
      <p style="color:var(--text); margin-top:0.75rem;"><strong>You:</strong> "What was that movie you recommended?"</p>
      <p style="color:var(--accent); margin-bottom:0;"><strong>Claude:</strong> "You asked for sci-fi that doesn't treat the audience like idiots. I suggested Arrival, Primer, and Coherence. You watched Primer and said it melted your brain."</p>
    </div>
  </div>

  <!-- ========== FAQ ========== -->
  <div class="faq">
    <h2>Common questions</h2>
    <div class="faq-item"><h3>How do I read the exported JSON?</h3><p>Open the <a href="viewer.html" style="color:var(--accent);text-decoration:none;font-weight:600;">Conversation Viewer</a> in your browser and drag your file into it. You can browse, sort, and search all your conversations in a chat-like format. Or upload the file to Claude and ask it to find what you're looking for.</p></div>
    <div class="faq-item"><h3>Is this safe?</h3><p>Everything runs in your browser. No data is sent anywhere. Files save directly to your computer. Source code is open on GitHub.</p></div>
    <div class="faq-item"><h3>How long does the conversation export take?</h3><p>~1 second per conversation. 500 chats ≈ 10 minutes. Don't close the tab.</p></div>
    <div class="faq-item"><h3>Works with free ChatGPT?</h3><p>Yes. Free, Plus, Team, Enterprise — all work.</p></div>
    <div class="faq-item"><h3>File too large for Claude?</h3><p>Zip it first. Right-click → Compress. Claude accepts .zip uploads.</p></div>
    <div class="faq-item"><h3>Export stopped or errored?</h3><p>Usually a rate limit. Wait a minute, refresh <a href="https://chatgpt.com" target="_blank" rel="noopener" style="color:var(--accent);text-decoration:none;font-weight:700;">chatgpt.com</a>, try again. The tool retries automatically.</p></div>
    <div class="faq-item"><h3>Will OpenAI ban me?</h3><p>You're accessing your own data through your own login session, using the same API the website uses. That said, these are undocumented endpoints.</p></div>
    <div class="faq-item"><h3>Why not just use a browser extension?</h3><p>Extensions export conversations as text. This tool exports <strong>memory items</strong>, message metadata, timestamps, model info, and custom instructions — everything needed for a real migration.</p></div>
  </div>

  <!-- ========== FOOTER ========== -->
  <div class="footer">
    <p>GPT→Claude Migration Kit — built with <a href="https://claude.ai">Claude</a> by <a href="https://www.siamsnus.com">Siamsnus</a></p>
    <p>Open source under MIT License — <a href="https://github.com/Siamsnus/GPT2Claude-Migration-Kit">View source on GitHub</a></p>
    <p style="margin-top:0.75rem; font-size:0.72rem; color:#444;">OpenAI's internal API may change without notice. Not affiliated with OpenAI or Anthropic.</p>
  </div>
</div>

<!-- Full script stored here for copy button -->
<script id="migrate-source" type="text/plain">
// GPT2Claude Migration Kit v2.2
// https://github.com/Siamsnus/GPT2Claude-Migration-Kit
// Exports ChatGPT memories, conversations, and instructions
// No data leaves your browser - everything runs locally

(function() {
  // Prevent double-loading
  if (document.getElementById("gpt2claude-panel")) {
    var existing = document.getElementById("gpt2claude-panel");
    existing.style.animation = "g2c-shake 0.3s ease-in-out";
    setTimeout(function() { existing.style.animation = ""; }, 300);
    return;
  }

  // ========== STYLES ==========
  var style = document.createElement("style");
  style.textContent = "\
    @keyframes g2c-fadein { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }\
    @keyframes g2c-shake { 0%,100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }\
    @keyframes g2c-spin { to { transform: rotate(360deg); } }\
    @keyframes g2c-pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }\
    @keyframes g2c-indeterminate { 0% { left: -30%; width: 30%; } 50% { left: 50%; width: 30%; } 100% { left: 100%; width: 30%; } }\
    @keyframes g2c-pulse-count { 0%,100% { opacity: 1; } 50% { opacity: 0.7; } }\
    @keyframes g2c-dot-bounce { 0%,80%,100% { transform: translateY(0); } 40% { transform: translateY(-4px); } }\
    .g2c-progress-fill.indeterminate { position: relative; width: 100% !important; background: none !important; overflow: hidden; }\
    .g2c-progress-fill.indeterminate::after { content: ''; position: absolute; top: 0; left: -30%; width: 30%; height: 100%; background: linear-gradient(90deg, transparent, #d4a574, transparent); border-radius: 3px; animation: g2c-indeterminate 1.5s ease-in-out infinite; }\
    .g2c-scan-hero { text-align: center; padding: 20px 0 10px; }\
    .g2c-scan-hero .g2c-scan-count { font-size: 42px; font-weight: 800; color: #d4a574; font-variant-numeric: tabular-nums; animation: g2c-pulse-count 2s ease-in-out infinite; line-height: 1; }\
    .g2c-scan-hero .g2c-scan-label { font-size: 12px; color: #888; margin-top: 4px; }\
    .g2c-scan-hero .g2c-scan-status { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 12px; font-size: 12px; color: #999; }\
    .g2c-scan-dots { display: flex; gap: 3px; }\
    .g2c-scan-dots span { width: 4px; height: 4px; background: #d4a574; border-radius: 50%; animation: g2c-dot-bounce 1.2s ease-in-out infinite; }\
    .g2c-scan-dots span:nth-child(2) { animation-delay: 0.15s; }\
    .g2c-scan-dots span:nth-child(3) { animation-delay: 0.3s; }\
    .g2c-scan-models { display: flex; flex-wrap: wrap; gap: 4px; justify-content: center; margin-top: 14px; padding-top: 14px; border-top: 1px solid #2a2a35; }\
    .g2c-scan-tag { font-size: 10px; padding: 3px 10px; background: #1e1e26; border: 1px solid #2a2a35; border-radius: 20px; color: #a0a0e0; font-family: 'SF Mono', Consolas, monospace; }\
    .g2c-scan-reassure { font-size: 11px; color: #555; text-align: center; margin-top: 12px; }\
    .g2c-dl-hero { text-align: center; padding: 16px 0 8px; }\
    .g2c-dl-hero .g2c-dl-count { font-size: 28px; font-weight: 700; color: #7eb8a0; }\
    .g2c-dl-hero .g2c-dl-of { font-size: 14px; color: #555; }\
    .g2c-dl-hero .g2c-dl-title { font-size: 11px; color: #888; margin-top: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 10px; }\
    .g2c-dl-pct { font-size: 11px; color: #d4a574; font-family: 'SF Mono', Consolas, monospace; text-align: right; margin-top: 6px; }\
    .g2c-dl-remaining { font-size: 11px; color: #666; text-align: center; margin-top: 8px; }\
    .g2c-complete { text-align: center; padding: 20px 0 10px; }\
    .g2c-complete-icon { font-size: 36px; margin-bottom: 6px; }\
    .g2c-complete-title { font-size: 18px; font-weight: 700; color: #7eb8a0; }\
    .g2c-complete-sub { font-size: 12px; color: #888; margin-top: 6px; }\
    .g2c-whatsnext { margin: 16px 0; padding: 14px; background: #141418; border: 1px solid #252530; border-radius: 10px; }\
    .g2c-whatsnext-title { font-size: 11px; color: #888; margin-bottom: 10px; font-weight: 600; }\
    .g2c-whatsnext-item { font-size: 12px; color: #ccc; line-height: 1.8; margin-bottom: 10px; }\
    .g2c-whatsnext-item:last-child { margin-bottom: 0; }\
    .g2c-whatsnext-item a { color: #d4a574; text-decoration: none; }\
    .g2c-whatsnext-item a:hover { text-decoration: underline; }\
    .g2c-whatsnext-badge { font-size: 10px; color: #7eb8a0; background: rgba(126,184,160,0.12); padding: 1px 6px; border-radius: 4px; }\
    .g2c-copy-log { background: none; border: none; color: #666; font-size: 11px; cursor: pointer; padding: 6px 0; margin-top: 10px; margin-left: 12px; }\
    .g2c-copy-log:hover { color: #aaa; }\
    #gpt2claude-panel { position: fixed; top: 50%; right: 24px; transform: translateY(-50%); width: 360px; background: #1a1a1f; border: 1px solid #333340; border-radius: 16px; box-shadow: 0 25px 60px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.06); z-index: 999999; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; color: #e8e8ec; animation: g2c-fadein 0.3s ease-out; }\
    #gpt2claude-panel * { box-sizing: border-box; margin: 0; padding: 0; }\
    .g2c-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 22px 14px; border-bottom: 1px solid #2a2a35; background: #1e1e24; border-radius: 16px 16px 0 0; }\
    .g2c-title { font-size: 15px; font-weight: 700; letter-spacing: -0.01em; }\
    .g2c-title span.gpt { color: #a0a0e0; }\
    .g2c-title span.arrow { color: #555; margin: 0 4px; }\
    .g2c-title span.claude { color: #d4a574; }\
    .g2c-version { font-size: 10px; color: #666; font-weight: 600; margin-top: 2px; }\
    .g2c-close { background: none; border: none; color: #777; font-size: 20px; cursor: pointer; padding: 4px 8px; border-radius: 6px; line-height: 1; }\
    .g2c-close:hover { background: #252530; color: #e8e8ec; }\
    .g2c-body { padding: 18px 22px 14px; }\
    .g2c-btn { width: 100%; padding: 14px 16px; border: 1px solid #333340; border-radius: 12px; background: #222228; color: #e8e8ec; font-size: 13px; font-weight: 600; cursor: pointer; text-align: left; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; transition: all 0.15s ease; position: relative; overflow: hidden; }\
    .g2c-btn:hover { background: #2a2a32; border-color: #444450; transform: translateY(-1px); }\
    .g2c-btn:active { transform: translateY(0); }\
    .g2c-btn.running { pointer-events: none; border-color: #d4a574; }\
    .g2c-btn.done { border-color: #7eb8a0; }\
    .g2c-btn.error { border-color: #e07070; }\
    .g2c-btn-icon { font-size: 20px; width: 28px; text-align: center; flex-shrink: 0; }\
    .g2c-btn-text { flex: 1; }\
    .g2c-btn-sub { font-size: 11px; color: #777; font-weight: 400; margin-top: 3px; }\
    .g2c-progress { margin-top: 10px; }\
    .g2c-progress-bar { width: 100%; height: 5px; background: #252530; border-radius: 3px; overflow: hidden; }\
    .g2c-progress-fill { height: 100%; background: linear-gradient(90deg, #d4a574, #e8c49a); border-radius: 3px; transition: width 0.3s ease; width: 0%; }\
    .g2c-progress-text { font-size: 11px; color: #999; margin-top: 6px; }\
    .g2c-log { margin-top: 14px; max-height: 140px; overflow-y: auto; background: #141418; border: 1px solid #252530; border-radius: 10px; padding: 10px 12px; font-family: 'SF Mono', 'Consolas', monospace; font-size: 11px; line-height: 1.6; color: #999; display: none; }\
    .g2c-log.visible { display: block; }\
    .g2c-log-entry { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\
    .g2c-log-entry.error { color: #e07070; }\
    .g2c-log-entry.success { color: #7eb8a0; }\
    .g2c-footer { padding: 14px 22px; border-top: 1px solid #252530; display: flex; justify-content: space-between; align-items: center; }\
    .g2c-footer-text { font-size: 10px; color: #555; }\
    .g2c-footer-link { font-size: 10px; color: #d4a574; text-decoration: none; }\
    .g2c-footer-link:hover { text-decoration: underline; }\
    .g2c-spinner { display: inline-block; width: 16px; height: 16px; border: 2px solid #444; border-top-color: #d4a574; border-radius: 50%; animation: g2c-spin 0.6s linear infinite; }\
    .g2c-toggle-log { background: none; border: none; color: #666; font-size: 11px; cursor: pointer; padding: 6px 0; margin-top: 10px; }\
    .g2c-toggle-log:hover { color: #aaa; }\
    .g2c-drag-handle { cursor: move; }\
    .g2c-divider { height: 1px; background: #2a2a35; margin: 6px 0 10px; }\
    .g2c-filter-panel { margin-top: 10px; }\
    .g2c-filter-section { margin-bottom: 12px; }\
    .g2c-filter-label { font-size: 10px; color: #888; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }\
    .g2c-filter-models { max-height: 120px; overflow-y: auto; background: #141418; border: 1px solid #252530; border-radius: 8px; padding: 6px 8px; }\
    .g2c-model-row { display: flex; align-items: center; padding: 3px 0; font-size: 12px; cursor: pointer; color: #ccc; }\
    .g2c-model-row:hover { color: #fff; }\
    .g2c-model-row input { margin-right: 8px; accent-color: #d4a574; }\
    .g2c-model-row .cnt { color: #666; margin-left: auto; font-size: 10px; font-family: monospace; }\
    .g2c-filter-row { display: flex; gap: 8px; align-items: center; margin-bottom: 6px; }\
    .g2c-filter-input { flex: 1; padding: 6px 8px; background: #141418; border: 1px solid #252530; border-radius: 6px; color: #e8e8ec; font-size: 12px; font-family: monospace; outline: none; }\
    .g2c-filter-input:focus { border-color: #d4a574; }\
    .g2c-filter-input::placeholder { color: #555; }\
    .g2c-filter-summary { font-size: 12px; color: #d4a574; padding: 8px 0; font-weight: 600; }\
    .g2c-filter-drop { border: 1px dashed #333340; border-radius: 8px; padding: 10px; text-align: center; font-size: 11px; color: #666; cursor: pointer; transition: all 0.15s; }\
    .g2c-filter-drop:hover { border-color: #d4a574; color: #999; }\
    .g2c-filter-drop.active { border-color: #7eb8a0; color: #7eb8a0; }\
    .g2c-select-btns { display: flex; gap: 6px; margin-top: 4px; }\
    .g2c-select-btns button { background: none; border: none; color: #666; font-size: 10px; cursor: pointer; padding: 0; }\
    .g2c-select-btns button:hover { color: #d4a574; }\
  ";
  document.head.appendChild(style);

  // ========== PANEL HTML ==========
  var panel = document.createElement("div");
  panel.id = "gpt2claude-panel";
  panel.innerHTML = '\
    <div class="g2c-header g2c-drag-handle">\
      <div>\
        <div class="g2c-title"><span class="gpt">GPT</span><span class="arrow">\u2192</span><span class="claude">Claude</span></div>\
        <div class="g2c-version">Migration Kit v2.2</div>\
      </div>\
      <button class="g2c-close" id="g2c-close">\u00D7</button>\
    </div>\
    <div class="g2c-body">\
      <button class="g2c-btn" id="g2c-btn-memory">\
        <div class="g2c-btn-icon">\uD83E\uDDE0</div>\
        <div class="g2c-btn-text">\
          Export Memories\
          <div class="g2c-btn-sub">Facts ChatGPT learned about you</div>\
        </div>\
      </button>\
      <button class="g2c-btn" id="g2c-btn-convos">\
        <div class="g2c-btn-icon">\uD83D\uDCAC</div>\
        <div class="g2c-btn-text">\
          Export All Conversations\
          <div class="g2c-btn-sub">Scans first, then you choose what to download</div>\
        </div>\
      </button>\
      <button class="g2c-btn" id="g2c-btn-instructions">\
        <div class="g2c-btn-icon">\u2699\uFE0F</div>\
        <div class="g2c-btn-text">\
          Export Instructions\
          <div class="g2c-btn-sub">Custom instructions &amp; settings</div>\
        </div>\
      </button>\
      <button class="g2c-btn" id="g2c-btn-all" style="border-color:#d4a574;background:#222228;">\
        <div class="g2c-btn-icon">\uD83D\uDCE5</div>\
        <div class="g2c-btn-text">\
          <span style="color:#d4a574;">Export Everything</span>\
          <div class="g2c-btn-sub">All three in one click</div>\
        </div>\
      </button>\
      <div class="g2c-progress" id="g2c-progress" style="display:none;">\
        <div class="g2c-progress-bar"><div class="g2c-progress-fill" id="g2c-progress-fill"></div></div>\
        <div class="g2c-progress-text" id="g2c-progress-text"></div>\
      </div>\
      <button class="g2c-toggle-log" id="g2c-toggle-log">Show log \u25BC</button>\
      <button class="g2c-copy-log" id="g2c-copy-log">Copy log</button>\
      <div class="g2c-log" id="g2c-log"></div>\
    </div>\
    <div class="g2c-footer">\
      <span class="g2c-footer-text">All data stays in your browser</span>\
      <a class="g2c-footer-link" href="https://github.com/Siamsnus/GPT2Claude-Migration-Kit" target="_blank">GitHub</a>\
    </div>\
  ';
  document.body.appendChild(panel);

  // ========== DRAGGING ==========
  var isDragging = false;
  var dragOffsetX = 0;
  var dragOffsetY = 0;
  var header = panel.querySelector(".g2c-drag-handle");

  header.addEventListener("mousedown", function(e) {
    if (e.target.classList.contains("g2c-close")) return;
    isDragging = true;
    var rect = panel.getBoundingClientRect();
    dragOffsetX = e.clientX - rect.left;
    dragOffsetY = e.clientY - rect.top;
    panel.style.transition = "none";
    e.preventDefault();
  });

  document.addEventListener("mousemove", function(e) {
    if (!isDragging) return;
    panel.style.right = "auto";
    panel.style.transform = "none";
    panel.style.left = (e.clientX - dragOffsetX) + "px";
    panel.style.top = (e.clientY - dragOffsetY) + "px";
  });

  document.addEventListener("mouseup", function() {
    isDragging = false;
    panel.style.transition = "";
  });

  // ========== HELPERS ==========
  var logEl = document.getElementById("g2c-log");
  var progressEl = document.getElementById("g2c-progress");
  var progressFill = document.getElementById("g2c-progress-fill");
  var progressText = document.getElementById("g2c-progress-text");

  function log(msg, type) {
    var entry = document.createElement("div");
    entry.className = "g2c-log-entry" + (type ? " " + type : "");
    entry.textContent = msg;
    logEl.appendChild(entry);
    logEl.scrollTop = logEl.scrollHeight;
  }

  function setProgress(pct, text) {
    progressEl.style.display = "block";
    progressFill.style.width = pct + "%";
    if (text) progressText.textContent = text;
  }

  function setButtonState(btn, state, label) {
    btn.className = "g2c-btn " + state;
    var iconEl = btn.querySelector(".g2c-btn-icon");
    if (state === "running") {
      iconEl.innerHTML = '<div class="g2c-spinner"></div>';
    } else if (state === "done") {
      iconEl.textContent = "\u2705";
    } else if (state === "error") {
      iconEl.textContent = "\u274C";
    }
    if (label) {
      btn.querySelector(".g2c-btn-sub").textContent = label;
    }
  }

  function downloadFile(content, filename, type) {
    var blob = new Blob([content], {type: type || "text/plain"});
    var url = URL.createObjectURL(blob);
    var a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    log("Downloaded: " + filename, "success");
  }

  // Safe event listener helper — guards against null elements in ChatGPT's SPA
  function safeAddEvent(id, event, handler) {
    var el = document.getElementById(id);
    if (el) {
      el.addEventListener(event, handler);
    } else {
      log("Warning: element #" + id + " not found", "error");
    }
    return el;
  }

  var cachedToken = null;

  async function getToken() {
    if (cachedToken) return cachedToken;
    log("Authenticating...");
    var resp = await fetch("https://chatgpt.com/api/auth/session", {credentials: "include"});
    if (resp.status !== 200) {
      throw new Error("Auth failed (HTTP " + resp.status + "). Are you logged in?");
    }
    var data = await resp.json();
    if (!data.accessToken) {
      throw new Error("No token found. Please refresh chatgpt.com and try again.");
    }
    cachedToken = data.accessToken;
    log("Authenticated OK");
    return cachedToken;
  }

  // Extract model from conversation metadata — tries multiple field names
  function getConvoModel(c) {
    return c.default_model_slug || c.model || c.model_slug || c.gpt_model || "unknown";
  }

  // Extract timestamp from conversation — handles epoch (seconds or ms) and ISO strings
  function getConvoTime(c) {
    var raw = c.update_time || c.updated_at || c.create_time || c.created_at || 0;
    if (!raw) return 0;
    if (typeof raw === "string") {
      // ISO date string
      var parsed = new Date(raw).getTime() / 1000;
      return isNaN(parsed) ? 0 : parsed;
    }
    // Epoch: if > 1e12 it's milliseconds, convert to seconds
    if (raw > 1e12) return raw / 1000;
    return raw;
  }

  // ========== EXPORT: MEMORIES ==========
  async function exportMemories() {
    var btn = document.getElementById("g2c-btn-memory");
    setButtonState(btn, "running", "Exporting...");

    try {
      var token = await getToken();

      log("Fetching memories...");
      var resp = await fetch("https://chatgpt.com/backend-api/memories", {
        credentials: "include",
        headers: {"Authorization": "Bearer " + token}
      });

      if (resp.status !== 200) {
        throw new Error("Could not fetch memories (HTTP " + resp.status + ")");
      }

      var data = await resp.json();
      var memories = data.memories || data.results || data;
      var md = "# ChatGPT Memory Export\n";
      md += "# Exported: " + new Date().toISOString() + "\n";
      md += "# Tool: GPT2Claude Migration Kit v2.2\n\n";

      var count = 0;
      if (Array.isArray(memories)) {
        count = memories.length;
        for (var i = 0; i < memories.length; i++) {
          var m = memories[i];
          var content = m.content || m.value || m.text || m.memory || JSON.stringify(m);
          md += (i + 1) + ". " + content + "\n";
        }
      } else {
        md += JSON.stringify(memories, null, 2);
      }

      log("Found " + count + " memories");
      downloadFile(md, "chatgpt_memories.md", "text/markdown");
      setButtonState(btn, "done", count + " memories exported");

    } catch (err) {
      log("Memory export failed: " + err.message, "error");
      setButtonState(btn, "error", err.message);
    }
  }

  // ========== EXPORT: CONVERSATIONS ==========
  var scannedConvos = [];
  var previousExportIds = {};

  async function exportConversations() {
    var btn = document.getElementById("g2c-btn-convos");
    setButtonState(btn, "running", "Scanning...");

    // Show indeterminate progress
    var progressEl = document.getElementById("g2c-progress");
    progressEl.style.display = "block";
    var fillEl = document.getElementById("g2c-progress-fill");
    fillEl.classList.add("indeterminate");
    fillEl.style.width = "100%";

    // Insert scan hero display (State 2)
    var scanHero = document.createElement("div");
    scanHero.className = "g2c-scan-hero";
    scanHero.id = "g2c-scan-hero";
    scanHero.innerHTML = '<div class="g2c-scan-count" id="g2c-scan-count">0</div>' +
      '<div class="g2c-scan-label">conversations found</div>' +
      '<div class="g2c-scan-status" id="g2c-scan-status">' +
        '<span class="g2c-scan-dots"><span></span><span></span><span></span></span>' +
        ' Scanning your conversations\u2026' +
      '</div>' +
      '<div class="g2c-scan-models" id="g2c-scan-models"></div>' +
      '<div class="g2c-scan-reassure">Filter options appear when scan completes</div>';
    progressEl.parentNode.insertBefore(scanHero, progressEl.nextSibling);

    try {
      var token = await getToken();
      var headers = {"Authorization": "Bearer " + token};
      scannedConvos = [];
      var offset = 0;
      var liveModels = {};

      log("Scanning conversation list...");

      while (true) {
        var listResp = await fetch(
          "https://chatgpt.com/backend-api/conversations?offset=" + offset + "&limit=100&order=updated",
          {credentials: "include", headers: headers}
        );

        if (listResp.status !== 200) {
          throw new Error("Could not get conversations (HTTP " + listResp.status + ")");
        }

        var listData = await listResp.json();
        var items = listData.items || [];
        log("Batch: " + items.length + " conversations (offset " + offset + ")");

        // Log first item's keys for diagnostics
        if (offset === 0 && items.length > 0) {
          var sampleKeys = Object.keys(items[0]).join(", ");
          log("API fields: " + sampleKeys);
          var sample = items[0];
          log("Sample model: " + (sample.default_model_slug || sample.model || sample.model_slug || "null"));
          log("Sample time: update=" + sample.update_time + " create=" + sample.create_time);
        }

        for (var j = 0; j < items.length; j++) {
          scannedConvos.push(items[j]);
          var m = getConvoModel(items[j]);
          liveModels[m] = (liveModels[m] || 0) + 1;
        }

        // Update scan hero display
        var countEl = document.getElementById("g2c-scan-count");
        var statusEl = document.getElementById("g2c-scan-status");
        if (countEl) countEl.textContent = scannedConvos.length.toLocaleString();
        if (statusEl) {
          statusEl.innerHTML = items.length >= 100
            ? '<span class="g2c-scan-dots"><span></span><span></span><span></span></span> Still scanning \u2014 this takes a minute, all good'
            : 'Scan complete!';
        }

        // Update model tags
        var tagsHtml = "";
        var modelKeys = Object.keys(liveModels).sort(function(a, b) { return liveModels[b] - liveModels[a]; });
        for (var mi = 0; mi < modelKeys.length; mi++) {
          tagsHtml += '<span class="g2c-scan-tag">' + modelKeys[mi] + ' (' + liveModels[modelKeys[mi]] + ')</span>';
        }
        var modelsEl = document.getElementById("g2c-scan-models");
        if (modelsEl) modelsEl.innerHTML = tagsHtml;

        offset += items.length;
        if (items.length < 100) break;
        await new Promise(function(r) { setTimeout(r, 500); });
      }

      log("Total conversations: " + scannedConvos.length);

      // Try to fetch project conversations too
      try {
        log("Checking for projects...");
        var statusEl = document.getElementById("g2c-scan-status");
        if (statusEl) statusEl.innerHTML = '<span class="g2c-scan-dots"><span></span><span></span><span></span></span> Checking projects\u2026';
        var projResp = await fetch(
          "https://chatgpt.com/backend-api/projects?offset=0&limit=100",
          {credentials: "include", headers: headers}
        );
        if (projResp.status === 200) {
          var projData = await projResp.json();
          var projects = projData.items || projData.projects || projData || [];
          if (Array.isArray(projects) && projects.length > 0) {
            log("Found " + projects.length + " projects");
            for (var pi = 0; pi < projects.length; pi++) {
              var proj = projects[pi];
              var projName = proj.title || proj.name || ("Project " + (pi + 1));
              var projId = proj.id || proj.project_id;
              log("Fetching project: " + projName);
              var projOffset = 0;
              while (true) {
                var projConvoResp = await fetch(
                  "https://chatgpt.com/backend-api/conversations?project_id=" + projId + "&offset=" + projOffset + "&limit=100&order=updated",
                  {credentials: "include", headers: headers}
                );
                if (projConvoResp.status !== 200) break;
                var projConvoData = await projConvoResp.json();
                var projItems = projConvoData.items || [];
                for (var pj = 0; pj < projItems.length; pj++) {
                  projItems[pj]._project = projName;
                  projItems[pj]._project_id = projId;
                  scannedConvos.push(projItems[pj]);
                }
                var countEl = document.getElementById("g2c-scan-count");
                if (countEl) countEl.textContent = scannedConvos.length.toLocaleString();
                var statusEl = document.getElementById("g2c-scan-status");
                if (statusEl) statusEl.innerHTML = '<span class="g2c-scan-dots"><span></span><span></span><span></span></span> Scanning project: ' + projName + '\u2026';
                projOffset += projItems.length;
                if (projItems.length < 100) break;
                await new Promise(function(r) { setTimeout(r, 500); });
              }
            }
            log("Total with projects: " + scannedConvos.length);
          } else {
            log("No projects found");
          }
        } else {
          log("Projects not available (HTTP " + projResp.status + ")");
        }
      } catch (projErr) {
        log("Projects check failed: " + projErr.message + " (continuing without)");
      }

      // Show filter panel
      setButtonState(btn, "done", scannedConvos.length + " conversations found");

      // Clean up scan hero display
      var scanHeroEl = document.getElementById("g2c-scan-hero");
      if (scanHeroEl) scanHeroEl.parentNode.removeChild(scanHeroEl);
      var fillEl = document.getElementById("g2c-progress-fill");
      fillEl.classList.remove("indeterminate");
      fillEl.style.width = "0%";
      document.getElementById("g2c-progress").style.display = "none";

      showFilterPanel();

    } catch (err) {
      log("Scan failed: " + err.message, "error");
      setButtonState(btn, "error", err.message);
    }
  }

  // ========== FILTER PANEL (State 3) ==========
  function showFilterPanel() {
    var models = {};
    var oldest = Infinity;
    var newest = 0;
    for (var i = 0; i < scannedConvos.length; i++) {
      var c = scannedConvos[i];
      var m = getConvoModel(c);
      models[m] = (models[m] || 0) + 1;
      var t = getConvoTime(c);
      if (t > 0 && t < oldest) oldest = t;
      if (t > 0 && t > newest) newest = t;
    }
    var modelKeys = Object.keys(models).sort(function(a, b) { return models[b] - models[a]; });

    function tsToDate(ts) {
      if (!ts || ts === Infinity) return "";
      if (typeof ts === "string") {
        // ISO string — just extract the date part
        var d = new Date(ts);
        if (isNaN(d.getTime())) return "";
        return d.toISOString().slice(0, 10);
      }
      var d = new Date(ts > 1e12 ? ts : ts * 1000);
      if (isNaN(d.getTime())) return "";
      return d.toISOString().slice(0, 10);
    }

    var modelCheckboxes = "";
    for (var i = 0; i < modelKeys.length; i++) {
      var mk = modelKeys[i];
      modelCheckboxes += '<label class="g2c-model-row"><input type="checkbox" checked data-model="' + mk + '"> ' + mk + '<span class="cnt">' + models[mk] + '</span></label>';
    }

    var scanSummary = '<div style="text-align:center;margin-bottom:14px;">' +
      '<span style="font-size:28px;font-weight:800;color:#7eb8a0;">' + scannedConvos.length.toLocaleString() + '</span>' +
      '<span style="font-size:12px;color:#888;"> conversations scanned</span>' +
      '</div>';

    var filterHtml = '\
      <div class="g2c-filter-panel" id="g2c-filter-panel">\
        ' + scanSummary + '\
        <div class="g2c-filter-section">\
          <div class="g2c-filter-label">Models</div>\
          <div class="g2c-filter-models" id="g2c-filter-models">' + modelCheckboxes + '</div>\
          <div class="g2c-select-btns"><button id="g2c-sel-all">Select all</button> \u00B7 <button id="g2c-sel-none">Select none</button></div>\
        </div>\
        <div class="g2c-filter-section">\
          <div class="g2c-filter-label">Date range</div>\
          <div class="g2c-filter-row">\
            <input type="date" class="g2c-filter-input" id="g2c-date-from" value="' + tsToDate(oldest) + '">\
            <span style="color:#555;">\u2192</span>\
            <input type="date" class="g2c-filter-input" id="g2c-date-to" value="' + tsToDate(newest) + '">\
          </div>\
        </div>\
        <div class="g2c-filter-section">\
          <div class="g2c-filter-label">Max conversations (0 = all)</div>\
          <input type="number" class="g2c-filter-input" id="g2c-limit" value="0" min="0" style="width:100%;">\
        </div>\
        <div class="g2c-filter-section">\
          <div class="g2c-filter-label">Incremental export (skip already exported)</div>\
          <div class="g2c-filter-drop" id="g2c-prev-drop">Drop or click to load previous export</div>\
          <input type="file" id="g2c-prev-file" accept=".json" style="display:none;">\
        </div>\
        <div class="g2c-filter-summary" id="g2c-filter-summary">' + scannedConvos.length + ' conversations selected</div>\
        <button class="g2c-btn" id="g2c-btn-download" style="border-color:#d4a574;margin-bottom:0;">\
          <div class="g2c-btn-icon">\uD83D\uDCE5</div>\
          <div class="g2c-btn-text"><span style="color:#d4a574;">Download ' + scannedConvos.length + ' conversations</span>\
            <div class="g2c-btn-sub">~' + estimateTime(scannedConvos.length) + '</div>\
          </div>\
        </button>\
      </div>';

    // Insert filter panel — with fallback for SPA DOM issues
    var bodyEl = panel.querySelector(".g2c-body");
    if (!bodyEl) {
      log("Warning: panel body not found", "error");
      return;
    }
    var progressEl = document.getElementById("g2c-progress");
    var filterDiv = document.createElement("div");
    filterDiv.innerHTML = filterHtml;
    var filterPanel = filterDiv.firstElementChild || filterDiv.firstChild;
    if (progressEl && progressEl.parentNode) {
      progressEl.parentNode.insertBefore(filterPanel, progressEl);
    } else {
      bodyEl.appendChild(filterPanel);
    }

    // Hide the main buttons — with null guards
    var hideIds = ["g2c-btn-memory", "g2c-btn-convos", "g2c-btn-instructions", "g2c-btn-all"];
    for (var hi = 0; hi < hideIds.length; hi++) {
      var hideEl = document.getElementById(hideIds[hi]);
      if (hideEl) hideEl.style.display = "none";
    }

    // Wire up events using safeAddEvent (BUG FIX)
    safeAddEvent("g2c-sel-all", "click", function() {
      var boxes = document.querySelectorAll("#g2c-filter-models input");
      for (var i = 0; i < boxes.length; i++) boxes[i].checked = true;
      updateFilterSummary();
    });
    safeAddEvent("g2c-sel-none", "click", function() {
      var boxes = document.querySelectorAll("#g2c-filter-models input");
      for (var i = 0; i < boxes.length; i++) boxes[i].checked = false;
      updateFilterSummary();
    });

    safeAddEvent("g2c-prev-drop", "click", function() {
      var fileInput = document.getElementById("g2c-prev-file");
      if (fileInput) fileInput.click();
    });

    var filterInputs = document.querySelectorAll("#g2c-filter-models input, #g2c-date-from, #g2c-date-to, #g2c-limit");
    for (var fi = 0; fi < filterInputs.length; fi++) {
      filterInputs[fi].addEventListener("change", updateFilterSummary);
    }

    safeAddEvent("g2c-prev-file", "change", function() {
      if (this.files.length) loadPreviousExport(this.files[0]);
    });
    var dropEl = document.getElementById("g2c-prev-drop");
    if (dropEl) {
      dropEl.addEventListener("dragover", function(e) { e.preventDefault(); this.style.borderColor = "#d4a574"; });
      dropEl.addEventListener("dragleave", function() { this.style.borderColor = ""; });
      dropEl.addEventListener("drop", function(e) {
        e.preventDefault();
        this.style.borderColor = "";
        if (e.dataTransfer.files.length) loadPreviousExport(e.dataTransfer.files[0]);
      });
    }

    safeAddEvent("g2c-btn-download", "click", startFilteredDownload);

    // Ensure all model checkboxes are programmatically checked (defensive)
    var allBoxes = document.querySelectorAll("#g2c-filter-models input");
    for (var bi = 0; bi < allBoxes.length; bi++) allBoxes[bi].checked = true;

    // Force-recalculate summary after DOM is fully wired
    updateFilterSummary();
  }

  function estimateTime(count) {
    var secs = count * 1.5;
    if (secs < 60) return "~" + Math.round(secs) + " seconds";
    var mins = Math.round(secs / 60);
    if (mins < 60) return "~" + mins + " minutes";
    var hrs = (secs / 3600).toFixed(1);
    return "~" + hrs + " hours";
  }

  function getFilteredConvos() {
    try {
      var selectedModels = {};
      var boxes = document.querySelectorAll("#g2c-filter-models input");
      for (var i = 0; i < boxes.length; i++) {
        if (boxes[i].checked) selectedModels[boxes[i].getAttribute("data-model")] = true;
      }

      // If no models selected, return all (fail-open)
      var hasModelFilter = Object.keys(selectedModels).length > 0;

      var fromEl = document.getElementById("g2c-date-from");
      var toEl = document.getElementById("g2c-date-to");
      var limitEl = document.getElementById("g2c-limit");

      var fromStr = fromEl ? fromEl.value : "";
      var toStr = toEl ? toEl.value : "";
      var fromTs = fromStr ? new Date(fromStr + "T00:00:00").getTime() / 1000 : 0;
      var toTs = toStr ? new Date(toStr + "T23:59:59").getTime() / 1000 : Infinity;

      var limit = limitEl ? (parseInt(limitEl.value) || 0) : 0;

      var filtered = [];
      for (var i = 0; i < scannedConvos.length; i++) {
        var c = scannedConvos[i];
        var model = getConvoModel(c);
        if (hasModelFilter && !selectedModels[model]) continue;

        var ts = getConvoTime(c);
        if (ts > 0 && (ts < fromTs || ts > toTs)) continue;

        if (previousExportIds[c.id]) continue;

        filtered.push(c);
        if (limit > 0 && filtered.length >= limit) break;
      }
      return filtered;
    } catch (err) {
      log("Filter error: " + err.message, "error");
      return scannedConvos; // fail-open: return all
    }
  }

  function updateFilterSummary() {
    var filtered = getFilteredConvos();
    var summary = document.getElementById("g2c-filter-summary");
    var dlBtn = document.getElementById("g2c-btn-download");
    var skipped = Object.keys(previousExportIds).length;
    var text = filtered.length + " conversations selected";
    if (skipped > 0) text += " (" + skipped + " skipped from previous export)";
    if (summary) summary.textContent = text;
    if (dlBtn) {
      var spanEl = dlBtn.querySelector(".g2c-btn-text span");
      if (spanEl) spanEl.textContent = "Download " + filtered.length + " conversations";
      var subEl = dlBtn.querySelector(".g2c-btn-sub");
      if (subEl) subEl.textContent = estimateTime(filtered.length);
    }
  }

  function loadPreviousExport(file) {
    var dropEl = document.getElementById("g2c-prev-drop");
    if (dropEl) dropEl.textContent = "Loading " + file.name + "...";
    var reader = new FileReader();
    reader.onload = function(e) {
      try {
        var data = JSON.parse(e.target.result);
        var convos = data.conversations || data || [];
        if (Array.isArray(convos)) {
          previousExportIds = {};
          for (var i = 0; i < convos.length; i++) {
            if (convos[i].id) previousExportIds[convos[i].id] = true;
          }
          if (dropEl) {
            dropEl.textContent = "\u2705 " + Object.keys(previousExportIds).length + " conversations from previous export";
            dropEl.className = "g2c-filter-drop active";
          }
          log("Loaded previous export: " + Object.keys(previousExportIds).length + " conversation IDs");
          updateFilterSummary();
        }
      } catch (err) {
        if (dropEl) dropEl.textContent = "\u274C Could not parse file";
        log("Previous export error: " + err.message, "error");
      }
    };
    reader.readAsText(file);
  }

  // ========== FILTERED DOWNLOAD (States 4 & 5) ==========
  async function startFilteredDownload() {
    var filtered = getFilteredConvos();
    if (filtered.length === 0) {
      alert("No conversations selected. Adjust your filters.");
      return;
    }

    // Replace filter panel with download hero UI (State 4)
    var filterPanel = document.getElementById("g2c-filter-panel");
    if (filterPanel) {
      filterPanel.innerHTML = '\
        <div class="g2c-dl-hero" id="g2c-dl-hero">\
          <span class="g2c-dl-count" id="g2c-dl-count">0</span>\
          <span class="g2c-dl-of" id="g2c-dl-of"> / ' + filtered.length + '</span>\
          <div class="g2c-dl-title" id="g2c-dl-title">Starting download\u2026</div>\
        </div>\
        <div style="margin:10px 0;">\
          <div class="g2c-progress-bar"><div class="g2c-progress-fill" id="g2c-dl-fill" style="width:0%;"></div></div>\
          <div class="g2c-dl-pct" id="g2c-dl-pct">0%</div>\
        </div>\
        <div class="g2c-dl-remaining" id="g2c-dl-remaining"></div>';
    }

    var startTime = Date.now();

    try {
      var token = await getToken();
      var headers = {"Authorization": "Bearer " + token};

      var fullExport = {
        export_date: new Date().toISOString(),
        tool: "GPT2Claude Migration Kit v2.2",
        format_version: 3,
        total_conversations: filtered.length,
        conversations: []
      };

      var successCount = 0;
      var errorCount = 0;

      for (var i = 0; i < filtered.length; i++) {
        var c = filtered[i];
        var title = c.title || "Untitled";
        var pct = Math.round(((i + 1) / filtered.length) * 100);
        var completed = i + 1;
        var remaining = filtered.length - completed;

        // Update download hero UI
        var dlCount = document.getElementById("g2c-dl-count");
        var dlTitle = document.getElementById("g2c-dl-title");
        var dlFill = document.getElementById("g2c-dl-fill");
        var dlPct = document.getElementById("g2c-dl-pct");
        var dlRemaining = document.getElementById("g2c-dl-remaining");

        if (dlCount) dlCount.textContent = completed;
        if (dlTitle) dlTitle.textContent = title;
        if (dlFill) dlFill.style.width = pct + "%";
        if (dlPct) dlPct.textContent = pct + "%";

        // Calculate time remaining
        if (dlRemaining && i > 0) {
          var elapsed = (Date.now() - startTime) / 1000;
          var perItem = elapsed / completed;
          var secsLeft = Math.round(perItem * remaining);
          if (secsLeft < 60) {
            dlRemaining.textContent = "~" + secsLeft + " seconds remaining";
          } else {
            dlRemaining.textContent = "~" + Math.round(secsLeft / 60) + " minutes remaining";
          }
        }

        try {
          var convoResp = await fetch("https://chatgpt.com/backend-api/conversation/" + c.id, {
            credentials: "include",
            headers: headers
          });

          if (convoResp.status === 429) {
            log("Rate limited, waiting 30s...", "error");
            if (dlTitle) dlTitle.textContent = "Rate limited \u2014 waiting 30s\u2026";
            if (dlRemaining) dlRemaining.textContent = "Will resume automatically";
            await new Promise(function(r) { setTimeout(r, 30000); });
            i--;
            continue;
          }

          if (convoResp.status !== 200) {
            log("Skipped: " + title + " (HTTP " + convoResp.status + ")", "error");
            errorCount++;
            fullExport.conversations.push({id: c.id, title: title, error: "HTTP " + convoResp.status});
            continue;
          }

          var detail = await convoResp.json();
          var messages = [];
          var hasBranches = false;

          if (detail.mapping) {
            var mapKeys = Object.keys(detail.mapping);
            var rootId = null;
            for (var mk = 0; mk < mapKeys.length; mk++) {
              if (!detail.mapping[mapKeys[mk]].parent) {
                rootId = mapKeys[mk];
                break;
              }
            }
            if (!rootId) rootId = mapKeys[0];

            function extractNodeText(node) {
              if (!node || !node.message || !node.message.content) return "";
              var parts = node.message.content.parts;
              if (!Array.isArray(parts)) return JSON.stringify(node.message.content);
              var textParts = [];
              for (var p = 0; p < parts.length; p++) {
                if (typeof parts[p] === "string") {
                  textParts.push(parts[p]);
                } else if (parts[p] && typeof parts[p] === "object") {
                  if (parts[p].content_type === "image_asset_pointer" || parts[p].asset_pointer) {
                    var imgName = (parts[p].metadata && parts[p].metadata.dalle && parts[p].metadata.dalle.prompt)
                      ? "DALL-E: " + parts[p].metadata.dalle.prompt : "image";
                    textParts.push("[\uD83D\uDDBC " + imgName + "]");
                  }
                }
              }
              return textParts.join("\n");
            }

            function extractNodeRole(node) {
              return (node.message && node.message.author && node.message.author.role) || "unknown";
            }

            function extractNodeModel(node) {
              return (node.message && node.message.metadata && node.message.metadata.model_slug) || null;
            }

            function extractNodeTime(node) {
              return (node.message && node.message.create_time) || null;
            }

            var current = rootId;
            var visited = {};
            var safety = 0;

            while (current && safety < 50000) {
              safety++;
              if (visited[current]) break;
              visited[current] = true;
              var node = detail.mapping[current];
              if (!node) break;

              if (node.message && node.message.content) {
                var text = extractNodeText(node);
                if (text.trim() !== "") {
                  var msgObj = {
                    role: extractNodeRole(node),
                    content: text,
                    timestamp: extractNodeTime(node),
                    model: extractNodeModel(node)
                  };

                  if (node.parent && detail.mapping[node.parent]) {
                    var parentNode = detail.mapping[node.parent];
                    if (parentNode.children && parentNode.children.length > 1) {
                      var alts = [];
                      for (var ci = 0; ci < parentNode.children.length; ci++) {
                        var sibId = parentNode.children[ci];
                        if (sibId === current) continue;
                        var sib = detail.mapping[sibId];
                        if (sib && sib.message && sib.message.content) {
                          var sibText = extractNodeText(sib);
                          if (sibText.trim()) {
                            alts.push({
                              content: sibText,
                              role: extractNodeRole(sib),
                              timestamp: extractNodeTime(sib),
                              model: extractNodeModel(sib)
                            });
                          }
                        }
                      }
                      if (alts.length > 0) {
                        msgObj.alternatives = alts;
                        hasBranches = true;
                      }
                    }
                  }

                  messages.push(msgObj);
                }
              }

              if (node.children && node.children.length > 0) {
                current = node.children[node.children.length - 1];
              } else {
                break;
              }
            }
          }

          fullExport.conversations.push({
            id: c.id,
            title: title,
            create_time: c.create_time,
            update_time: c.update_time,
            model: detail.default_model_slug || detail.model || null,
            project: c._project || null,
            project_id: c._project_id || null,
            has_branches: hasBranches,
            message_count: messages.length,
            messages: messages
          });

          successCount++;
          if (i % 25 === 0 && i > 0) {
            log("Progress: " + (i + 1) + "/" + filtered.length);
          }

        } catch (err) {
          log("Error: " + title + " \u2014 " + err.message, "error");
          errorCount++;
          fullExport.conversations.push({id: c.id, title: title, error: err.message});
          var dlTitle = document.getElementById("g2c-dl-title");
          if (dlTitle) dlTitle.textContent = "Error: " + err.message;
        }

        await new Promise(function(r) { setTimeout(r, 1000); });
      }

      var json = JSON.stringify(fullExport, null, 2);
      var sizeMB = (json.length / 1024 / 1024).toFixed(1);

      downloadFile(json, "chatgpt_all_conversations.json", "application/json");
      log("DONE! " + successCount + " conversations, " + errorCount + " errors, ~" + sizeMB + " MB", "success");

      // Show completion screen (State 5)
      var filterPanel = document.getElementById("g2c-filter-panel");
      if (filterPanel) {
        filterPanel.innerHTML = '\
          <div class="g2c-complete">\
            <div class="g2c-complete-icon">\u2705</div>\
            <div class="g2c-complete-title">Export Complete!</div>\
            <div class="g2c-complete-sub">' + successCount + ' conversations \u00B7 ' + sizeMB + ' MB</div>\
          </div>\
          <div class="g2c-whatsnext">\
            <div class="g2c-whatsnext-title">What\u2019s next?</div>\
            <div class="g2c-whatsnext-item">\
              <span style="color:#a0a0e0;">\uD83D\uDC40 Browse your data</span><br>\
              <span style="color:#999;">Open the <a href="https://siamsnus.github.io/GPT2Claude-Migration-Kit/viewer.html" target="_blank">Conversation Viewer</a> to explore your chats. You can <a href="https://siamsnus.github.io/GPT2Claude-Migration-Kit/viewer.html" download target="_blank">download it</a> for fully offline use.</span>\
            </div>\
            <div class="g2c-whatsnext-item">\
              <span style="color:#7eb8a0;">\uD83D\uDE80 Import to Claude</span> <span class="g2c-whatsnext-badge">recommended</span><br>\
              <span style="color:#999;">Follow the <a href="https://siamsnus.github.io/GPT2Claude-Migration-Kit/#importing" target="_blank">import guide</a> to bring your history into Claude.</span>\
            </div>\
          </div>';
      }

    } catch (err) {
      log("Download failed: " + err.message, "error");
      var dlTitle = document.getElementById("g2c-dl-title");
      if (dlTitle) dlTitle.textContent = "Error: " + err.message;
    }
  }

  // ========== EXPORT: INSTRUCTIONS ==========
  async function exportInstructions() {
    var btn = document.getElementById("g2c-btn-instructions");
    setButtonState(btn, "running", "Exporting...");

    try {
      var token = await getToken();
      var headers = {"Authorization": "Bearer " + token};

      var endpoints = [
        {name: "custom_instructions", url: "https://chatgpt.com/backend-api/user_system_messages"},
        {name: "settings", url: "https://chatgpt.com/backend-api/settings"}
      ];

      var result = {
        export_date: new Date().toISOString(),
        tool: "GPT2Claude Migration Kit v2.2",
        data: {}
      };

      for (var i = 0; i < endpoints.length; i++) {
        var ep = endpoints[i];
        log("Fetching " + ep.name + "...");
        try {
          var resp = await fetch(ep.url, {credentials: "include", headers: headers});
          if (resp.status === 200) {
            result.data[ep.name] = await resp.json();
            log("Got: " + ep.name);
          } else if (resp.status === 404) {
            result.data[ep.name] = {note: "Not available on this account"};
            log(ep.name + ": not available (skipped)");
          } else {
            result.data[ep.name] = {error: "HTTP " + resp.status};
            log(ep.name + ": HTTP " + resp.status, "error");
          }
        } catch (e) {
          result.data[ep.name] = {error: e.message};
          log(ep.name + " error: " + e.message, "error");
        }
      }

      downloadFile(JSON.stringify(result, null, 2), "chatgpt_instructions.json", "application/json");
      setButtonState(btn, "done", "Instructions exported");

    } catch (err) {
      log("Instructions export failed: " + err.message, "error");
      setButtonState(btn, "error", err.message);
    }
  }

  // ========== EVENT LISTENERS ==========
  document.getElementById("g2c-close").addEventListener("click", function() {
    panel.style.animation = "g2c-fadein 0.2s ease-out reverse";
    setTimeout(function() { panel.remove(); style.remove(); }, 200);
  });

  document.getElementById("g2c-btn-memory").addEventListener("click", exportMemories);
  document.getElementById("g2c-btn-convos").addEventListener("click", exportConversations);
  document.getElementById("g2c-btn-instructions").addEventListener("click", exportInstructions);

  document.getElementById("g2c-btn-all").addEventListener("click", async function() {
    var btn = document.getElementById("g2c-btn-all");
    setButtonState(btn, "running", "Exporting everything...");
    log("--- EXPORT ALL started ---");
    await exportMemories();
    await exportInstructions();
    log("Memories & instructions done. Scanning conversations...");
    await exportConversations();
    log("Memories & instructions exported. Configure conversation filters and click Download.", "success");
  });

  document.getElementById("g2c-toggle-log").addEventListener("click", function() {
    var logVisible = logEl.classList.contains("visible");
    logEl.classList.toggle("visible");
    this.textContent = logVisible ? "Show log \u25BC" : "Hide log \u25B2";
  });

  // Copy log button
  document.getElementById("g2c-copy-log").addEventListener("click", function() {
    var copyBtn = this;
    var entries = document.querySelectorAll(".g2c-log-entry");
    var text = "";
    for (var i = 0; i < entries.length; i++) {
      text += entries[i].textContent + "\n";
    }
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text).then(function() {
        copyBtn.textContent = "\u2705 Copied!";
        setTimeout(function() { copyBtn.textContent = "Copy log"; }, 2000);
      }).catch(function() {
        fallbackCopy(text, copyBtn);
      });
    } else {
      fallbackCopy(text, copyBtn);
    }
  });

  function fallbackCopy(text, btn) {
    var ta = document.createElement("textarea");
    ta.value = text;
    ta.style.position = "fixed";
    ta.style.left = "-9999px";
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand("copy");
      btn.textContent = "\u2705 Copied!";
      setTimeout(function() { btn.textContent = "Copy log"; }, 2000);
    } catch (e) {
      btn.textContent = "Copy failed";
      setTimeout(function() { btn.textContent = "Copy log"; }, 2000);
    }
    document.body.removeChild(ta);
  }

  log("Ready. Click a button to start exporting.");
})();
</script>

<script>
// Browser detection
(function() {
  var detect = document.getElementById("browser-detect");
  var isFirefox = navigator.userAgent.indexOf("Firefox") > -1;
  var isChrome = navigator.userAgent.indexOf("Chrome") > -1 && navigator.userAgent.indexOf("Edg") === -1;
  var isEdge = navigator.userAgent.indexOf("Edg") > -1;
  var isBrave = navigator.brave !== undefined;

  if (isFirefox) {
    detect.textContent = "🦊 Firefox detected — use the Firefox tab below";
    showTab("firefox");
  } else if (isBrave) {
    detect.textContent = "🦁 Brave detected — drag the button below";
    showTab("chrome");
  } else if (isEdge) {
    detect.textContent = "🌐 Edge detected — drag the button below";
    showTab("chrome");
  } else if (isChrome) {
    detect.textContent = "✨ Chrome detected — drag the button below";
    showTab("chrome");
  }
})();

// Tab switching
function showTab(name) {
  var tabs = document.querySelectorAll(".tab-content");
  var btns = document.querySelectorAll(".tab-btn");
  for (var i = 0; i < tabs.length; i++) { tabs[i].classList.remove("active"); }
  for (var i = 0; i < btns.length; i++) { btns[i].classList.remove("active"); }
  document.getElementById("tab-" + name).classList.add("active");
  var labels = {"chrome": 0, "firefox": 1, "paste": 2};
  if (labels[name] !== undefined) btns[labels[name]].classList.add("active");
}

// Copy bookmark URL (for Firefox)
var copyUrlBtn = document.getElementById("copy-bookmark-url");
if (copyUrlBtn) {
  copyUrlBtn.addEventListener("click", function() {
    var href = document.getElementById("bookmarklet-btn").getAttribute("href");
    navigator.clipboard.writeText(href).then(function() {
      document.getElementById("copy-url-confirm").style.display = "block";
      copyUrlBtn.innerHTML = "✅ Copied!";
      setTimeout(function() {
        copyUrlBtn.innerHTML = "📋 Copy bookmark URL";
        document.getElementById("copy-url-confirm").style.display = "none";
      }, 4000);
    });
  });
}

// Copy full script (for console paste)
var copyScriptBtn = document.getElementById("copy-full-script");
if (copyScriptBtn) {
  copyScriptBtn.addEventListener("click", function() {
    var code = document.getElementById("migrate-source").textContent.trim();
    navigator.clipboard.writeText(code).then(function() {
      document.getElementById("copy-script-confirm").style.display = "block";
      copyScriptBtn.innerHTML = "✅ Copied!";
      setTimeout(function() {
        copyScriptBtn.innerHTML = "📋 Copy export script";
        document.getElementById("copy-script-confirm").style.display = "none";
      }, 4000);
    });
  });
}
</script>
</body>
</html>